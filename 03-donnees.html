<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="fr-fr" xml:lang="fr-fr"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.32">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Julien Martin">
<meta name="description" content="En cours de traduction">
<title>3&nbsp; Données – Sur le chemin de l'enf-R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./04-graphique.html" rel="next">
<link href="./02-base.html" rel="prev">
<link href="./images/cover/book_fav.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-2486e1f0a3ee9ee1fc393803a1361cdb.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark-6561bbde787c299e21493071c8edc6ff.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-c0dc7ac2c5723ded4848ec98b3ba37c0.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Pas de résultats",
    "search-matching-documents-text": "documents trouvés",
    "search-copy-link-title": "Copier le lien vers la recherche",
    "search-hide-matches-text": "Cacher les correspondances additionnelles",
    "search-more-match-text": "correspondance de plus dans ce document",
    "search-more-matches-text": "correspondances de plus dans ce document",
    "search-clear-button-title": "Effacer",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Annuler",
    "search-submit-button-title": "Envoyer",
    "search-label": "Recherche"
  }
}</script><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-SLXFYRXJR4"></script><script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-SLXFYRXJR4', { 'anonymize_ip': true});
</script>
</head>
<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg " data-bs-theme="dark"><div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title"><img src="images/cover/book_hex_fr.png" class="img-fluid" width="50"> Chemin enf-R</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Recherche"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Basculer la navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
<li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-bi-flag" role="link" data-bs-toggle="dropdown" aria-expanded="false">
      <i class="bi bi-flag" role="img">
</i> 
 <span class="menu-text"></span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-bi-flag">
<li>
    <a class="dropdown-item" href="https://biostats-uottawa.github.io/Rway/03-data.html">
 <span class="dropdown-text">English</span></a>
  </li>  
    </ul>
</li>
  <li class="nav-item">
    <a class="nav-link active" href="./902-donnees.html" aria-current="page"> 
<span class="menu-text">Données</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://biostats-uottawa.github.io/"> 
<span class="menu-text">Biostats uOttawa</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://biostats-uottawa.github.io/bioXx58/"> 
<span class="menu-text">Biostats with R (BioXx58)</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://biostats-uottawa.github.io/bio8940/"> 
<span class="menu-text">Biostats avancées et science ouverte (Bio8940)</span></a>
  </li>  
</ul>
</div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools tools-wide">
    <a href="https://github.com/biostats-uottawa/enfR/" title="Code source" class="quarto-navigation-tool px-1" aria-label="Code source"><i class="bi bi-github"></i></a>
    <div class="dropdown">
      <a href="" title="Télécharger" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" role="link" aria-label="Télécharger"><i class="bi bi-download"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
<li>
            <a class="dropdown-item quarto-navbar-tools-item" href="./Sur-le-chemin-de-l-enf-R.pdf">
              <i class="bi bi-file-pdf pe-1"></i>
            Télécharger PDF
            </a>
          </li>
          <li>
            <a class="dropdown-item quarto-navbar-tools-item" href="./Sur-le-chemin-de-l-enf-R.epub">
              <i class="bi bi-journal pe-1"></i>
            Télécharger ePub
            </a>
          </li>
      </ul>
</div>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Basculer le mode sombre"><i class="bi"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Basculer en mode lecteur">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
      </div> <!-- /container-fluid -->
    </nav><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Basculer la barre latérale" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./01-debut.html">Utiliser R</a></li><li class="breadcrumb-item"><a href="./03-donnees.html"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Données</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Basculer la barre latérale" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto"><div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Préface</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Utiliser R</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Basculer la section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-debut.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Pour commencer</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-base.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Quelques notions de base sur R</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-donnees.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Données</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-graphique.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Figures</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-programmation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Programmation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-quarto.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Rapports reproductibles avec Quarto</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-github.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Contrôle de version avec Git et GitHub</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Principes de statistique</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Basculer la section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./25-puissance.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Analyse de puissance avec R et G*Power</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Modèles linéaires</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Basculer la section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./31-reg_lin.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Corrélation et régression linéaire simple</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./32-t_test.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Comparaison de deux échantillons</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./33-anova.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">ANOVA à un critère de classification</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./34-anova_mult.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">ANOVA à critères multiples : plans factoriels et hiérarchiques</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./35-reg_mult.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Régression multiple</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./36-ancova_glm.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">ANCOVA et modèle linéaire général</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">Modèles linéaires généralisés</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Basculer la section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./42-model_freq.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Analyse de données de fréquence: Tableaux de contingence, modèles log-linéaires et régression de Poisson</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">Modèles mixtes</span></span>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">Modèles additifs généralisés</span></span>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">Analyses multivariées</span></span>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">Approche Bayesienne</span></span>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./901-bibliographie.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Références</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="true">
 <span class="menu-text">Annexes</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="true" aria-label="Basculer la section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./902-donnees.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Données utilisées dans le livre</span></span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table des matières</h2>
   
  <ul>
<li><a href="#types-de-donn%C3%A9es" id="toc-types-de-données" class="nav-link active" data-scroll-target="#types-de-donn%C3%A9es"><span class="header-section-number">3.1</span> Types de données</a></li>
  <li>
<a href="#structures-de-donn%C3%A9es" id="toc-structures-de-données" class="nav-link" data-scroll-target="#structures-de-donn%C3%A9es"><span class="header-section-number">3.2</span> Structures de données</a>
  <ul class="collapse">
<li><a href="#sec-scal-vecs" id="toc-sec-scal-vecs" class="nav-link" data-scroll-target="#sec-scal-vecs"><span class="header-section-number">3.2.1</span> Scalaires et vecteurs</a></li>
  <li><a href="#sec-mat-array" id="toc-sec-mat-array" class="nav-link" data-scroll-target="#sec-mat-array"><span class="header-section-number">3.2.2</span> Matrices et tableaux (<code>array</code>)</a></li>
  <li><a href="#sec-lists" id="toc-sec-lists" class="nav-link" data-scroll-target="#sec-lists"><span class="header-section-number">3.2.3</span> Listes</a></li>
  <li><a href="#sec-df" id="toc-sec-df" class="nav-link" data-scroll-target="#sec-df"><span class="header-section-number">3.2.4</span> Jeu de données</a></li>
  </ul>
</li>
  <li>
<a href="#importer-des-donn%C3%A9es" id="toc-importer-des-données" class="nav-link" data-scroll-target="#importer-des-donn%C3%A9es"><span class="header-section-number">3.3</span> Importer des données</a>
  <ul class="collapse">
<li><a href="#enregistrement-de-fichiers-%C3%A0-importer" id="toc-enregistrement-de-fichiers-à-importer" class="nav-link" data-scroll-target="#enregistrement-de-fichiers-%C3%A0-importer"><span class="header-section-number">3.3.1</span> Enregistrement de fichiers à importer</a></li>
  <li><a href="#sec-import-fnc" id="toc-sec-import-fnc" class="nav-link" data-scroll-target="#sec-import-fnc"><span class="header-section-number">3.3.2</span> Fonctions d’importation</a></li>
  <li><a href="#frustrations-courantes-li%C3%A9es-%C3%A0-limportation" id="toc-frustrations-courantes-liées-à-limportation" class="nav-link" data-scroll-target="#frustrations-courantes-li%C3%A9es-%C3%A0-limportation"><span class="header-section-number">3.3.3</span> Frustrations courantes liées à l’importation</a></li>
  <li><a href="#sec-import-other" id="toc-sec-import-other" class="nav-link" data-scroll-target="#sec-import-other"><span class="header-section-number">3.3.4</span> Autres options d’importation</a></li>
  </ul>
</li>
  <li>
<a href="#manipuler-des-jeux-de-donn%C3%A9es" id="toc-manipuler-des-jeux-de-données" class="nav-link" data-scroll-target="#manipuler-des-jeux-de-donn%C3%A9es"><span class="header-section-number">3.4</span> Manipuler des jeux de données</a>
  <ul class="collapse">
<li><a href="#index-positionnels" id="toc-index-positionnels" class="nav-link" data-scroll-target="#index-positionnels"><span class="header-section-number">3.4.1</span> Index positionnels</a></li>
  <li><a href="#index-logiques" id="toc-index-logiques" class="nav-link" data-scroll-target="#index-logiques"><span class="header-section-number">3.4.2</span> Index logiques</a></li>
  <li><a href="#ordonner-un-jeu-de-donn%C3%A9es" id="toc-ordonner-un-jeu-de-données" class="nav-link" data-scroll-target="#ordonner-un-jeu-de-donn%C3%A9es"><span class="header-section-number">3.4.3</span> Ordonner un jeu de données</a></li>
  <li><a href="#ajout-de-colonnes-et-de-lignes" id="toc-ajout-de-colonnes-et-de-lignes" class="nav-link" data-scroll-target="#ajout-de-colonnes-et-de-lignes"><span class="header-section-number">3.4.4</span> Ajout de colonnes et de lignes</a></li>
  <li><a href="#fusionner-des-jeux-de-donn%C3%A9es" id="toc-fusionner-des-jeux-de-données" class="nav-link" data-scroll-target="#fusionner-des-jeux-de-donn%C3%A9es"><span class="header-section-number">3.4.5</span> Fusionner des jeux de données</a></li>
  <li><a href="#sec-reshape" id="toc-sec-reshape" class="nav-link" data-scroll-target="#sec-reshape"><span class="header-section-number">3.4.6</span> Remodeler des jeux de données</a></li>
  </ul>
</li>
  <li><a href="#introduction-au-tidyverse-lunivers-ordonn%C3%A9" id="toc-introduction-au-tidyverse-lunivers-ordonné" class="nav-link" data-scroll-target="#introduction-au-tidyverse-lunivers-ordonn%C3%A9"><span class="header-section-number">3.5</span> Introduction au <code>tidyverse</code> (<em>L’univers ordonné</em>)</a></li>
  <li><a href="#r%C3%A9sumer-des-jeux-de-donn%C3%A9es" id="toc-résumer-des-jeux-de-données" class="nav-link" data-scroll-target="#r%C3%A9sumer-des-jeux-de-donn%C3%A9es"><span class="header-section-number">3.6</span> Résumer des jeux de données</a></li>
  <li>
<a href="#exporter-des-donn%C3%A9es" id="toc-exporter-des-données" class="nav-link" data-scroll-target="#exporter-des-donn%C3%A9es"><span class="header-section-number">3.7</span> Exporter des données</a>
  <ul class="collapse">
<li><a href="#fonctions-dexportation" id="toc-fonctions-dexportation" class="nav-link" data-scroll-target="#fonctions-dexportation"><span class="header-section-number">3.7.1</span> Fonctions d’exportation</a></li>
  <li><a href="#autres-fonctions-dexportation" id="toc-autres-fonctions-dexportation" class="nav-link" data-scroll-target="#autres-fonctions-dexportation"><span class="header-section-number">3.7.2</span> Autres fonctions d’exportation</a></li>
  </ul>
</li>
  </ul><div class="toc-actions"><ul><li><a href="https://github.com/biostats-uottawa/enfR/edit/main/03-donnees.qmd" class="toc-action"><i class="bi bi-github"></i>Modifier cette page</a></li><li><a href="https://github.com/biostats-uottawa/enfR/issues/new" class="toc-action"><i class="bi empty"></i>Faire part d'un problème</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./01-debut.html">Utiliser R</a></li><li class="breadcrumb-item"><a href="./03-donnees.html"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Données</span></a></li></ol></nav><div class="quarto-title">
<h1 class="title"><span id="sec-data-r" class="quarto-section-identifier"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Données</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header><p>Jusqu’à présent, vous avez créé des données relativement simples dans R et les avez stockées sous forme de vecteur (<a href="02-base.html#sec-funcs" class="quarto-xref"><span>Section 2.4</span></a>). Cependant, la plupart d’entre vous (si ce n’est tous) disposeront d’ensembles de données beaucoup plus complexes provenant de vos diverses expériences et enquêtes, qui vont bien au-delà de ce qu’un vecteur peut gérer. Apprendre comment R traite les différents types de données et structures de données, comment importer vos données dans R et comment manipuler et résumer vos données sont quelques-unes des compétences les plus importantes que vous devrez maîtriser.</p>
<p>Dans ce chapitre, nous passerons en revue les principaux types de données dans R et nous nous concentrerons sur certaines des structures de données les plus courantes. Nous verrons également comment importer des données dans R à partir d’un fichier externe, comment manipuler et résumer des données et enfin comment exporter des données de R vers un fichier externe.</p>
<section id="types-de-données" class="level2" data-number="3.1"><h2 data-number="3.1" class="anchored" data-anchor-id="types-de-données">
<span class="header-section-number">3.1</span> Types de données</h2>
<p>Il est important de comprendre les différents types de données et la manière dont R traite ces données. La tentation est grande d’ignorer ces détails techniques, mais attention, cela peut se retourner contre vous très vite si vous ne faites pas attention. Nous avons déjà vu un exemple (<a href="02-base.html#sec-r-objs" class="quarto-xref"><span>Section 2.3.1</span></a>) de cela lorsque nous avons essayé (et échoué) d’ajouter deux objets de type <code>caractères</code> ensemble en utilisant l’opérateur <code>+</code>.</p>
<p>R dispose de six types de données de base : numérique (<code>numeric</code>), entier (<code>integer</code>), logique (<code>logical</code>), complexe (<code>complex</code>) et caractère (<code>character</code>). Les plus attentifs d’entre vous remarqueront que nous n’avons listé ici que cinq types de données, le dernier étant le type de données brut (<code>raw</code>), que nous n’aborderons pas car il n’est pas utile dans 99,99 % des cas. Nous n’aborderons pas non plus les nombres complexes, mais nous vous laisserons <a href="https://www.mathsisfun.com/numbers/complex-numbers.html">imaginer</a> cette partie !</p>
<ul>
<li><p><strong>Numérique</strong> sont des nombres contenant une décimale. En fait, il peut également s’agir de nombres entiers, mais nous n’y reviendrons pas.</p></li>
<li><p><strong>Entiers (<code>integer</code>)</strong> sont des nombres entiers (sans virgule).</p></li>
<li><p><strong>Logique</strong> prennent la valeur de <code>TRUE</code> ou <code>FALSE</code>. Il existe également un autre type de logique appelé <code>NA</code> pour représenter les valeurs manquantes.</p></li>
<li><p><strong>Caractère</strong> sont des chaînes de caractères comme un (ou plusieurs) mot(s). Un type particulier de chaîne de caractères est le <em>facteur</em> qui a des attributs supplémentaires (comme des niveaux ou un ordre). Nous reviendrons sur les facteurs plus tard.</p></li>
</ul>
<p>R est (généralement) capable de distinguer automatiquement les différentes classes de données en fonction de leur nature et du contexte dans lequel elles sont utilisées, bien que vous deviez garder à l’esprit que R ne peut pas vraiment lire dans vos pensées et que vous devrez peut-être lui indiquer explicitement comment vous souhaitez traiter un type de données. Vous pouvez connaître le type (ou la classe) de n’importe quel objet en utilisant la fonction <code><a href="https://rdrr.io/r/base/class.html">class()</a></code> pour connaître le type (ou la classe) d’un objet.</p>
<div class="cell">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">num</span> <span class="op">&lt;-</span> <span class="fl">2.2</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">num</span><span class="op">)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "numeric"</code></pre>
</div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">char</span> <span class="op">&lt;-</span> <span class="st">"hello"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">char</span><span class="op">)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">logi</span> <span class="op">&lt;-</span> <span class="cn">TRUE</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">logi</span><span class="op">)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "logical"</code></pre>
</div>
</div>
<p>Vous pouvez également demander si un objet appartient à une classe spécifique à l’aide d’un test logique. Le test <code>is.[classOfData]()</code> renvoie soit un <code>TRUE</code> ou un <code>FALSE</code>.</p>
<div class="cell">
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html">is.numeric</a></span><span class="op">(</span><span class="va">num</span><span class="op">)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/character.html">is.character</a></span><span class="op">(</span><span class="va">num</span><span class="op">)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/character.html">is.character</a></span><span class="op">(</span><span class="va">char</span><span class="op">)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/logical.html">is.logical</a></span><span class="op">(</span><span class="va">logi</span><span class="op">)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<p>Il peut parfois être utile de pouvoir changer la classe d’une variable à l’aide de la fonction <code>as.[className]()</code> bien qu’il faille être prudent car vous pourriez obtenir des résultats inattendus (voir ce qui se passe ci-dessous lorsque nous essayons de convertir une chaîne de caractères en une chaîne numérique).</p>
<div class="cell">
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># convertir un objet numérique en caractère</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">num</span><span class="op">)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "numeric"</code></pre>
</div>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">num_char</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span><span class="op">(</span><span class="va">num</span><span class="op">)</span></span>
<span><span class="va">num_char</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2.2"</code></pre>
</div>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">num_char</span><span class="op">)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># convertir un objet caractère en numérique !</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">char</span><span class="op">)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">char_num</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="va">char</span><span class="op">)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: NAs introduced by coercion</code></pre>
</div>
</div>
<p>Voici un tableau récapitulatif de certaines des fonctions de test logique et de coercion à votre disposition.</p>
<table class="caption-top table">
<thead><tr class="header">
<th style="text-align: center;">Type de test</th>
<th style="text-align: center;">Test logique</th>
<th style="text-align: center;">Coercition</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Caractère</td>
<td style="text-align: center;"><code>is.character</code></td>
<td style="text-align: center;"><code>as.character</code></td>
</tr>
<tr class="even">
<td style="text-align: center;">Numérique</td>
<td style="text-align: center;"><code>is.numeric</code></td>
<td style="text-align: center;"><code>as.numeric</code></td>
</tr>
<tr class="odd">
<td style="text-align: center;">Logique</td>
<td style="text-align: center;"><code>is.logical</code></td>
<td style="text-align: center;"><code>as.logical</code></td>
</tr>
<tr class="even">
<td style="text-align: center;">Facteur</td>
<td style="text-align: center;"><code>is.factor</code></td>
<td style="text-align: center;"><code>as.factor</code></td>
</tr>
<tr class="odd">
<td style="text-align: center;">Complexe</td>
<td style="text-align: center;"><code>is.complex</code></td>
<td style="text-align: center;"><code>as.complex</code></td>
</tr>
</tbody>
</table></section><section id="structures-de-données" class="level2" data-number="3.2"><h2 data-number="3.2" class="anchored" data-anchor-id="structures-de-données">
<span class="header-section-number">3.2</span> Structures de données</h2>
<p>Maintenant que vous connaissez certaines des classes de données les plus importantes de R, examinons quelques-unes des principales structures dont nous disposons pour stocker ces données.</p>
<section id="sec-scal-vecs" class="level3" data-number="3.2.1"><h3 data-number="3.2.1" class="anchored" data-anchor-id="sec-scal-vecs">
<span class="header-section-number">3.2.1</span> Scalaires et vecteurs</h3>
<p>Le type de structure de données le plus simple est sans doute le vecteur. Vous avez déjà été initié aux vecteurs dans la <a href="02-base.html#sec-funcs" class="quarto-xref"><span>Section 2.4</span></a>, certains des vecteurs que vous avez créés ne contenaient qu’une seule valeur (longueur 1) on. appelle ça un scalaires. Les vecteurs peuvent contenir des nombres, des caractères, des facteurs ou des logiques, mais la chose essentielle à retenir est que tous les éléments à l’intérieur d’un vecteur doivent être de la même classe. En d’autres termes, les vecteurs peuvent contenir des nombres, des caractères ou des logiques, mais pas des mélanges de ces types de données. Il existe une exception importante à cette règle : vous pouvez inclure des <code>NA</code> (rappelez-vous qu’il s’agit d’un type spécial de logique) pour indiquer les données manquantes dans les vecteurs contenant d’autres types de données.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-data_struc" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-data_struc-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/data/scal_vec.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:40.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-data_struc-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3.1: Structure de données scalaires et vecteurs
</figcaption></figure>
</div>
</div>
</div>
</section><section id="sec-mat-array" class="level3" data-number="3.2.2"><h3 data-number="3.2.2" class="anchored" data-anchor-id="sec-mat-array">
<span class="header-section-number">3.2.2</span> Matrices et tableaux (<code>array</code>)</h3>
<p>La matrice est une autre structure de données utile, utilisée dans de nombreuses disciplines telles que l’écologie des populations et les statistiques théoriques et appliquées. Une matrice est simplement un vecteur doté d’attributs supplémentaires appelés dimensions. Les tableaux (<code>array</code>) ne sont que des matrices multidimensionnelles. Là encore, les matrices et les tableaux doivent contenir des éléments appartenant tous à la même classe de données.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-data_struc2" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-data_struc2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/data/mat_array.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:50.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-data_struc2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3.2: Structure de données matrices et tableaux (<code>array</code>)
</figcaption></figure>
</div>
</div>
</div>
<p>Un moyen pratique de créer une matrice ou un tableau est d’utiliser la fonction <code><a href="https://rdrr.io/r/base/matrix.html">matrix()</a></code> et <code><a href="https://rdrr.io/r/base/array.html">array()</a></code> respectivement. Ci-dessous, nous allons créer une matrice à partir d’une séquence de 1 à 16 en quatre lignes (<code>nrow = 4</code>) et la remplir par rangée (<code>byrow = TRUE</code>) plutôt que par colonne, comme c’est le cas par défaut. Lors de l’utilisation de l’option <code><a href="https://rdrr.io/r/base/array.html">array()</a></code> il faut définir les dimensions à l’aide de la fonction <code>dim =</code> dans notre cas, 2 <em>lignes</em>, 4 <em>colonnes</em> dans 2 <em>matrices</em> différentes :</p>
<div class="cell">
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">ma_mat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">16</span>, nrow <span class="op">=</span> <span class="fl">4</span>, byrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">ma_mat</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3] [,4]
[1,]    1    2    3    4
[2,]    5    6    7    8
[3,]    9   10   11   12
[4,]   13   14   15   16</code></pre>
</div>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">mon_tabl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/array.html">array</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">16</span>, dim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">4</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">mon_tabl</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>, , 1

     [,1] [,2] [,3] [,4]
[1,]    1    3    5    7
[2,]    2    4    6    8

, , 2

     [,1] [,2] [,3] [,4]
[1,]    9   11   13   15
[2,]   10   12   14   16</code></pre>
</div>
</div>
<p>Il est parfois utile de définir les noms des lignes et des colonnes de votre matrice, mais ce n’est pas obligatoire. Pour ce faire, utilisez la fonction <code><a href="https://rdrr.io/r/base/colnames.html">rownames()</a></code> et <code><a href="https://rdrr.io/r/base/colnames.html">colnames()</a></code> :</p>
<div class="cell">
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span><span class="op">(</span><span class="va">ma_mat</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>, <span class="st">"D"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">ma_mat</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>, <span class="st">"d"</span><span class="op">)</span></span>
<span><span class="va">ma_mat</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   a  b  c  d
A  1  2  3  4
B  5  6  7  8
C  9 10 11 12
D 13 14 15 16</code></pre>
</div>
</div>
<p>Une fois que vous avez créé vos matrices, vous pouvez faire des choses utiles avec elles et, comme vous pouvez vous y attendre, R dispose de nombreuses fonctions intégrées pour effectuer des opérations sur les matrices. Certaines des plus courantes sont présentées ci-dessous. Par exemple, pour transposer une matrice, nous utilisons la fonction de transposition <code><a href="https://rdrr.io/r/base/t.html">t()</a></code> :</p>
<div class="cell">
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">ma_mat_t</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/t.html">t</a></span><span class="op">(</span><span class="va">ma_mat</span><span class="op">)</span></span>
<span><span class="va">ma_mat_t</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  A B  C  D
a 1 5  9 13
b 2 6 10 14
c 3 7 11 15
d 4 8 12 16</code></pre>
</div>
</div>
<p>Pour extraire les éléments diagonaux d’une matrice et les stocker sous forme de vecteur, nous pouvons utiliser la fonction <code><a href="https://rdrr.io/r/base/diag.html">diag()</a></code> :</p>
<div class="cell">
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">ma_mat_diag</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/diag.html">diag</a></span><span class="op">(</span><span class="va">ma_mat</span><span class="op">)</span></span>
<span><span class="va">ma_mat_diag</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  1  6 11 16</code></pre>
</div>
</div>
<p>Les opérations habituelles d’addition, de multiplication, etc. de matrices peuvent être effectuées. Notez l’utilisation de la fonction <code>%*%</code> pour effectuer une multiplication matricielle.</p>
<div class="cell">
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">mat.1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>, nrow <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">mat.1</span> <span class="co"># Notez que la matrice à été remplie par colonne par défaut</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2]
[1,]    2    1
[2,]    0    1</code></pre>
</div>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">mat.2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">2</span><span class="op">)</span>, nrow <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">mat.2</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2]
[1,]    1    0
[2,]    1    2</code></pre>
</div>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">mat.1</span> <span class="op">+</span> <span class="va">mat.2</span> <span class="co"># Addition de matrices</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2]
[1,]    3    1
[2,]    1    3</code></pre>
</div>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">mat.1</span> <span class="op">*</span> <span class="va">mat.2</span> <span class="co"># Produit élément par élément</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2]
[1,]    2    0
[2,]    0    2</code></pre>
</div>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">mat.1</span> <span class="op"><a href="https://rdrr.io/r/base/matmult.html">%*%</a></span> <span class="va">mat.2</span> <span class="co"># Multiplication de matrice</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2]
[1,]    3    2
[2,]    1    2</code></pre>
</div>
</div>
</section><section id="sec-lists" class="level3" data-number="3.2.3"><h3 data-number="3.2.3" class="anchored" data-anchor-id="sec-lists">
<span class="header-section-number">3.2.3</span> Listes</h3>
<p>La prochaine structure de données que nous examinerons rapidement est la liste. Alors que les vecteurs et les matrices sont contraints de contenir des données du même type, les listes peuvent stocker des mélanges de types de données. En fait, nous pouvons même stocker d’autres structures de données telles que des vecteurs et des tableaux à l’intérieur d’une liste ou même avoir une liste de liste. Il s’agit donc d’une structure de données très flexible, idéale pour stocker des données irrégulières ou non rectangulaires (voir <a href="05-programmation.html" class="quarto-xref"><span>Chapitre 5</span></a> pour un exemple).</p>
<p>Pour créer une liste, nous pouvons utiliser la fonction <code><a href="https://rdrr.io/r/base/list.html">list()</a></code>. Notez que les trois éléments de la liste sont de classes différentes (caractère, logique et numérique) et de longueurs différentes.</p>
<div class="cell">
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">list_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"black"</span>, <span class="st">"yellow"</span>, <span class="st">"orange"</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">6</span>, nrow <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">list_1</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] "black"  "yellow" "orange"

[[2]]
[1]  TRUE  TRUE FALSE  TRUE FALSE FALSE

[[3]]
     [,1] [,2]
[1,]    1    4
[2,]    2    5
[3,]    3    6</code></pre>
</div>
</div>
<p>Les éléments de la liste peuvent être nommés lors de la construction de la liste :</p>
<div class="cell">
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">list_2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span></span>
<span>  couleurs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"black"</span>, <span class="st">"yellow"</span>, <span class="st">"orange"</span><span class="op">)</span>,</span>
<span>  evaluation <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span><span class="op">)</span>,</span>
<span>  temps <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">6</span>, nrow <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">list_2</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$couleurs
[1] "black"  "yellow" "orange"

$evaluation
[1]  TRUE  TRUE FALSE  TRUE FALSE FALSE

$temps
     [,1] [,2]
[1,]    1    4
[2,]    2    5
[3,]    3    6</code></pre>
</div>
</div>
<p>ou après la création de la liste à l’aide de la fonction <code><a href="https://rdrr.io/r/base/names.html">names()</a></code> :</p>
<div class="cell">
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">list_1</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"couleurs"</span>, <span class="st">"evaluation"</span>, <span class="st">"temps"</span><span class="op">)</span></span>
<span><span class="va">list_1</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$couleurs
[1] "black"  "yellow" "orange"

$evaluation
[1]  TRUE  TRUE FALSE  TRUE FALSE FALSE

$temps
     [,1] [,2]
[1,]    1    4
[2,]    2    5
[3,]    3    6</code></pre>
</div>
</div>
</section><section id="sec-df" class="level3" data-number="3.2.4"><h3 data-number="3.2.4" class="anchored" data-anchor-id="sec-df">
<span class="header-section-number">3.2.4</span> Jeu de données</h3>
<p>De loin la structure de données la plus couramment utilisée : le jeu de données (<code>data frame</code>). Un jeu de données est un objet bidimensionnel puissant composé de <strong>lignes</strong> et de <strong>colonnes</strong> qui ressemble superficiellement à une matrice. Toutefois, alors que les matrices ne peuvent contenir que des données du même type, les jeux de données peuvent contenir un mélange de différents types de données. En règle générale, dans un jeu de données, chaque ligne correspond à une observation individuelle et chaque colonne correspond à une variable mesurée ou enregistrée différente. Cette configuration est peut-être familière à ceux d’entre vous qui utilisent LibreOffice Calc ou Microsoft Excel pour gérer et stocker leurs données. Il peut être utile de penser que les jeux de données sont essentiellement constitués d’un ensemble de vecteurs (colonnes), chaque vecteur contenant son propre type de données, mais le type de données peut être différent d’un vecteur à l’autre.</p>
<p>Par exemple, le jeu de données ci-dessous contient les résultats d’une expérience visant à déterminer l’effet des soins parentaux (avec ou sans) chez les licornes (<em>Unicornus magnificens</em>) sur la croissance des petits sous trois régimes de disponibilité alimentaire différents. Le jeu de données contient 8 variables (colonnes) et chaque ligne représente une licorne individuelle. Les variables <code>p_care</code> et <code>food</code> sont des facteurs (variables <a href="https://en.wikipedia.org/wiki/Categorical_variable">catégoriques</a>). La variable <code>p_care</code> a 2 niveaux (<code>care</code> et <code>no_care</code>) et la variable <code>food</code> a 3 niveaux (<code>low</code>, <code>medium</code> et <code>high</code>). Les variables <code>height</code>, <code>weight</code>, <code>mane_size</code> et <code>fluffyness</code> sont numériques et la variable <code>horn_rings</code> est un nombre entier représentant le nombre d’anneaux sur la corne. Bien que la variable <code>block</code> possède des valeurs numériques, celles-ci n’ont pas vraiment d’ordre et pourraient également être traitées comme un facteur (i.e. elles auraient également pu être appelées A et B).</p>
<div class="cell">
<div id="tbl-import-data" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure"><figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-import-data-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;3.1: Données importées sur les licornes
</figcaption><div aria-describedby="tbl-import-data-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 11%">
<col style="width: 10%">
<col style="width: 8%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 14%">
<col style="width: 16%">
<col style="width: 16%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">p_care</th>
<th style="text-align: left;">food</th>
<th style="text-align: right;">block</th>
<th style="text-align: right;">height</th>
<th style="text-align: right;">weight</th>
<th style="text-align: right;">mane_size</th>
<th style="text-align: right;">fluffyness</th>
<th style="text-align: right;">horn_rings</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">care</td>
<td style="text-align: left;">medium</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">7.5</td>
<td style="text-align: right;">7.62</td>
<td style="text-align: right;">11.7</td>
<td style="text-align: right;">31.9</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">care</td>
<td style="text-align: left;">medium</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">10.7</td>
<td style="text-align: right;">12.14</td>
<td style="text-align: right;">14.1</td>
<td style="text-align: right;">46.0</td>
<td style="text-align: right;">10</td>
</tr>
<tr class="odd">
<td style="text-align: left;">care</td>
<td style="text-align: left;">medium</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">11.2</td>
<td style="text-align: right;">12.76</td>
<td style="text-align: right;">7.1</td>
<td style="text-align: right;">66.7</td>
<td style="text-align: right;">10</td>
</tr>
<tr class="even">
<td style="text-align: left;">care</td>
<td style="text-align: left;">medium</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">10.4</td>
<td style="text-align: right;">8.78</td>
<td style="text-align: right;">11.9</td>
<td style="text-align: right;">20.3</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">care</td>
<td style="text-align: left;">medium</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">10.4</td>
<td style="text-align: right;">13.58</td>
<td style="text-align: right;">14.5</td>
<td style="text-align: right;">26.9</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="even">
<td style="text-align: left;">care</td>
<td style="text-align: left;">medium</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">9.8</td>
<td style="text-align: right;">10.08</td>
<td style="text-align: right;">12.2</td>
<td style="text-align: right;">72.7</td>
<td style="text-align: right;">9</td>
</tr>
<tr class="odd">
<td style="text-align: left;">no_care</td>
<td style="text-align: left;">low</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">3.7</td>
<td style="text-align: right;">8.10</td>
<td style="text-align: right;">10.5</td>
<td style="text-align: right;">60.5</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="even">
<td style="text-align: left;">no_care</td>
<td style="text-align: left;">low</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">3.2</td>
<td style="text-align: right;">7.45</td>
<td style="text-align: right;">14.1</td>
<td style="text-align: right;">38.1</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">no_care</td>
<td style="text-align: left;">low</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">3.9</td>
<td style="text-align: right;">9.19</td>
<td style="text-align: right;">12.4</td>
<td style="text-align: right;">52.6</td>
<td style="text-align: right;">9</td>
</tr>
<tr class="even">
<td style="text-align: left;">no_care</td>
<td style="text-align: left;">low</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">3.3</td>
<td style="text-align: right;">8.92</td>
<td style="text-align: right;">11.6</td>
<td style="text-align: right;">55.2</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="odd">
<td style="text-align: left;">no_care</td>
<td style="text-align: left;">low</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">5.5</td>
<td style="text-align: right;">8.44</td>
<td style="text-align: right;">13.5</td>
<td style="text-align: right;">77.6</td>
<td style="text-align: right;">9</td>
</tr>
<tr class="even">
<td style="text-align: left;">no_care</td>
<td style="text-align: left;">low</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">4.4</td>
<td style="text-align: right;">10.60</td>
<td style="text-align: right;">16.2</td>
<td style="text-align: right;">63.3</td>
<td style="text-align: right;">6</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p>Il y a deux choses importantes à garder à l’esprit à propos des jeux de données. Ces types d’objets sont connus sous le nom de données rectangulaires (ou données ordonnées), car chaque colonne doit comporter le même nombre d’observations. Aussi, toute donnée manquante doit être enregistrée sous la forme d’un <code>NA</code> comme nous l’avons fait pour nos vecteurs.</p>
<p>Nous pouvons construire un jeu de données à partir d’objets de données existants, tels que des vecteurs, à l’aide de la fonction <code><a href="https://rdrr.io/r/base/data.frame.html">data.frame()</a></code>. À titre d’exemple, créons trois vecteurs <code>p_taille</code>, <code>p_poids</code> et <code>p_noms</code> et incluons tous ces vecteurs dans un jeu de données appelé <code>dataf</code>.</p>
<div class="cell">
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">p_taille</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">180</span>, <span class="fl">155</span>, <span class="fl">160</span>, <span class="fl">167</span>, <span class="fl">181</span><span class="op">)</span></span>
<span><span class="va">p_poids</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">65</span>, <span class="fl">50</span>, <span class="fl">52</span>, <span class="fl">58</span>, <span class="fl">70</span><span class="op">)</span></span>
<span><span class="va">p_noms</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Joanna"</span>, <span class="st">"Charlotte"</span>, <span class="st">"Helen"</span>, <span class="st">"Karen"</span>, <span class="st">"Amy"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">dataf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>taille <span class="op">=</span> <span class="va">p_taille</span>, </span>
<span>                    poids <span class="op">=</span> <span class="va">p_poids</span>, </span>
<span>                    noms <span class="op">=</span> <span class="va">p_noms</span><span class="op">)</span></span>
<span><span class="va">dataf</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  taille poids      noms
1    180    65    Joanna
2    155    50 Charlotte
3    160    52     Helen
4    167    58     Karen
5    181    70       Amy</code></pre>
</div>
</div>
<p>Vous remarquerez que chacune des colonnes est nommée avec le nom de la variable que nous avons fourni lorsque nous avons utilisé la fonction <code><a href="https://rdrr.io/r/base/data.frame.html">data.frame()</a></code> lorsque nous avons utilisé la fonction. Il semble également que la première colonne du cadre de données soit une série de nombres allant de 1 à 5. En fait, il ne s’agit pas vraiment d’une colonne, mais du nom de chaque ligne. Nous pouvons le vérifier en demandant à R de renvoyer les dimensions du jeu de données <code>dataf</code> à l’aide de la fonction <code><a href="https://rdrr.io/r/base/dim.html">dim()</a></code>. Nous constatons qu’il y a 5 lignes et 3 colonnes.</p>
<div class="cell">
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">dataf</span><span class="op">)</span> <span class="co"># 5 lignes et 3 colonnes</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5 3</code></pre>
</div>
</div>
<p>Une autre fonction très utile que nous utilisons en permanence est <code><a href="https://rdrr.io/r/utils/str.html">str()</a></code> qui renvoie un résumé compact de la structure de l’objet data frame (ou de tout autre objet).</p>
<div class="cell">
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">dataf</span><span class="op">)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   5 obs. of  3 variables:
 $ height: num  180 155 160 167 181
 $ weight: num  65 50 52 58 70
 $ names : chr  "Joanna" "Charlotte" "Helen" "Karen" ...</code></pre>
</div>
</div>
<p>La fonction <code><a href="https://rdrr.io/r/utils/str.html">str()</a></code> nous donne les dimensions du jeu de données et nous rappelle que <code>dataf</code> est un <code>data.frame</code>. Il énumère également toutes les variables (colonnes) contenues dans le jeu de données, nous indique le type de données qu’elles contiennent et leurs 5 premières valeurs. Nous copions souvent ce résumé pour le mettre dans le scripts R avec des commentaires au début de chaque ligne afin de pouvoir nous y référer facilement lors de l’écriture du code. <em>Nous vous avons montré comment commenter les blocs dans RStudio dans la <a href="01-debut.html#sec-proj-doc" class="quarto-xref"><span>Section 1.7</span></a>.</em></p>
<p>Notez également que R a automatiquement décidé que notre <code>p_noms</code> doit être un caractère (<code>chr</code>) lors de la création du jeu de données. La question de savoir si c’est une bonne idée ou non dépendra de la manière dont vous souhaitez utiliser cette variable dans des analyses ultérieures. Si nous décidons que ce n’est pas une bonne idée, nous pouvons modifier le comportement par défaut du <code><a href="https://rdrr.io/r/base/data.frame.html">data.frame()</a></code> en incluant l’argument <code>stringsAsFactors = TRUE</code>. Nos chaînes de caractères seront maintenant automatiquement converties en facteurs.</p>
<div class="cell">
<div class="sourceCode" id="cb57"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">p_taille</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">180</span>, <span class="fl">155</span>, <span class="fl">160</span>, <span class="fl">167</span>, <span class="fl">181</span><span class="op">)</span></span>
<span><span class="va">p_poids</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">65</span>, <span class="fl">50</span>, <span class="fl">52</span>, <span class="fl">58</span>, <span class="fl">70</span><span class="op">)</span></span>
<span><span class="va">p_noms</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Joanna"</span>, <span class="st">"Charlotte"</span>, <span class="st">"Helen"</span>, <span class="st">"Karen"</span>, <span class="st">"Amy"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">dataf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span></span>
<span>  taille <span class="op">=</span> <span class="va">p_taille</span>, poids <span class="op">=</span> <span class="va">p_poids</span>, noms <span class="op">=</span> <span class="va">p_noms</span>,</span>
<span>  stringsAsFactors <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">dataf</span><span class="op">)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   5 obs. of  3 variables:
 $ taille: num  180 155 160 167 181
 $ poids : num  65 50 52 58 70
 $ noms  : Factor w/ 5 levels "Amy","Charlotte",..: 4 2 3 5 1</code></pre>
</div>
</div>
</section></section><section id="importer-des-données" class="level2" data-number="3.3"><h2 data-number="3.3" class="anchored" data-anchor-id="importer-des-données">
<span class="header-section-number">3.3</span> Importer des données</h2>
<p>Bien que la création de jeux de données à partir de structures de données existantes soit extrêmement utile, l’approche de loin la plus courante consiste à créer un jeu de données en important des données à partir d’un fichier externe. Pour ce faire, vos données doivent être correctement formatées et enregistrées dans un format de fichier que R est capable de reconnaître. Heureusement pour nous, R est capable de reconnaître une grande variété de formats de fichiers, même si, en réalité, vous n’en utiliserez probablement que deux ou trois régulièrement.</p>
<section id="enregistrement-de-fichiers-à-importer" class="level3" data-number="3.3.1"><h3 data-number="3.3.1" class="anchored" data-anchor-id="enregistrement-de-fichiers-à-importer">
<span class="header-section-number">3.3.1</span> Enregistrement de fichiers à importer</h3>
<p>La méthode la plus simple pour créer un fichier de données à importer dans R consiste à saisir vos données dans une feuille de calcul à l’aide de Microsoft Excel ou LibreOffice Calc et à l’enregistrer sous la forme d’un fichier délimité par des virgules. Nous préférons LibreOffice Calc car c’est un logiciel libre, indépendant de plate-forme et gratuit, mais MS Excel convient également (mais voir <a href="https://genomebiology.biomedcentral.com/articles/10.1186/s13059-016-1044-7">ici</a> pour quelques problèmes). Voici les données de l’expérience sur les licornes dont nous avons parlé précédemment, affichées dans LibreOffice. Si vous souhaitez suivre en même temps que le livre, vous pouvez télécharger le fichier de données (<em>‘unicorn.xlsx’</em>) à partir de l’<a href="902-donnees.html" class="quarto-xref"><span>Annexe A</span></a>.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-LO-calc0" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-LO-calc0-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/data/libre_off.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:60.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-LO-calc0-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3.3: Données Licornes (Unicorn) dans LibreOffice Calc
</figcaption></figure>
</div>
</div>
</div>
<p>Pour ceux d’entre vous qui ne connaissent pas le format de fichier délimité par des <strong>virgules</strong>, cela signifie simplement que les données des différentes colonnes sont séparées par le caractère “,” et sont généralement enregistrées dans un fichier portant l’extension “.csv” (<em>Comma-Separated Values</em>).</p>
<p>Pour enregistrer une feuille de calcul en tant que fichier délimité par des virgules (CSV) dans LibreOffice Calc, sélectionnez <code>Fichier</code> -&gt; <code>Enregistrer sous...</code> dans le menu principal. Vous devrez spécifier l’emplacement où vous souhaitez enregistrer votre fichier dans l’option “Enregistrer dans le dossier” et le nom du fichier dans l’option “Nom”. Dans le menu déroulant situé au-dessus du bouton “Enregistrer”, remplacez l’option par défaut “Tous les formats” par “Texte CSV (.csv)”.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-LO-calc" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-LO-calc-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/data/libre_off1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:60.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-LO-calc-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3.4: Choisir le format <code>csv</code> lors de l’enregistrement avec LibreOffice Calc
</figcaption></figure>
</div>
</div>
</div>
<p>Cliquez sur le bouton Enregistrer, puis sélectionnez l’option “Utiliser le format CSV texte”. Cliquez sur OK pour enregistrer le fichier.</p>
<p>Il y a quelques points à prendre en compte lors de l’enregistrement des fichiers à importer dans R, qui vous faciliteront la vie à long terme. Les titres de vos colonnes (si vous en avez) doivent être courts et informatifs. Évitez également les espaces dans vos titres de colonnes en les remplaçant par un trait de soulignement <code>_</code> ou un point <code>.</code> (c’est-à-dire remplacer <code>taille de la criniere</code> par <code>taille_de_la_criniere</code> ou <code>taille.de.la.criniere</code>) et d’éviter d’utiliser des caractères spéciaux (par ex. <code>aire (mm^2)</code>), des accents (par ex. écrire <code>criniere</code> au lieu de <code>crinière</code>) ou des majuscules pour vous simplifier la vie. N’oubliez pas que si vous avez des données manquantes dans votre cadre de données (cellules vides), vous devez utiliser un champ <code>NA</code> pour les représenter. Cela permettra de conserver un cadre de données ordonné.</p>
</section><section id="sec-import-fnc" class="level3" data-number="3.3.2"><h3 data-number="3.3.2" class="anchored" data-anchor-id="sec-import-fnc">
<span class="header-section-number">3.3.2</span> Fonctions d’importation</h3>
<p>Une fois que vous avez enregistré votre fichier de données dans un format approprié, nous pouvons maintenant lire ce fichier dans R. La fonction la plus utilisée pour importer des données dans R est la fonction <code><a href="https://rdrr.io/r/utils/read.table.html">read.table()</a></code> (nous examinerons d’autres solutions plus loin dans ce chapitre). La fonction <code><a href="https://rdrr.io/r/utils/read.table.html">read.table()</a></code> est une fonction très flexible qui dispose d’un grand nombre d’arguments (voir <code><a href="https://rdrr.io/r/utils/read.table.html">?read.table</a></code>), mais elle est assez simple à utiliser. Importons le fichier délimité par des virgules appelé <code>unicorns.csv</code> qui contient les données que nous avons vues précédemment dans ce chapitre (<a href="#sec-df" class="quarto-xref"><span>Section 3.2.4</span></a>) que l’on va assigner à un objet appelé <code>licornes</code>. Le fichier est situé dans un dossier <code>data</code> (“<code>données</code>”) qui est lui-même situé dans notre répertoire racine (<a href="01-debut.html#sec-dir-struc" class="quarto-xref"><span>Section 1.4</span></a>). La première ligne des données contient les noms des variables (colonnes). Pour utiliser les <code><a href="https://rdrr.io/r/utils/read.table.html">read.table()</a></code> pour importer ce fichier</p>
<div class="cell">
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">licornes</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.table</a></span><span class="op">(</span></span>
<span>  file <span class="op">=</span> <span class="st">"data/unicorns.csv"</span>, header <span class="op">=</span> <span class="cn">TRUE</span>, sep <span class="op">=</span> <span class="st">","</span>, dec <span class="op">=</span> <span class="st">"."</span>,</span>
<span>  stringsAsFactors <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Il y a quelques points à noter à propos de la commande ci-dessus. Tout d’abord, le chemin d’accès au fichier et le nom du fichier (y compris l’extension) doivent être placés entre guillemets simples ou doubles (c-à-d. le <code>data/unicorns.csv</code>), car la fonction <code><a href="https://rdrr.io/r/utils/read.table.html">read.table()</a></code> attend une chaîne de caractères. Si votre répertoire de travail est déjà le répertoire qui contient le fichier, il n’est pas nécessaire d’inclure le chemin d’accès complet au fichier, mais seulement le nom du fichier. Dans l’exemple ci-dessus, le chemin d’accès au fichier est séparé par une simple barre oblique. <code>/</code>. Cela fonctionne quel que soit le système d’exploitation que vous utilisez et nous vous recommandons de vous en tenir à cela. Cependant, les utilisateurs de Windows peuvent être plus familiers avec la notation de la barre oblique inverse simple et si vous voulez continuer à l’utiliser, vous devrez l’inclure en tant que barre oblique inverse double.</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Avertissement
</div>
</div>
<div class="callout-body-container callout-body">
<p>Notez cependant que la notation de la double barre oblique inverse fonctionnera <strong>pas</strong> sur les ordinateurs utilisant les systèmes d’exploitation Mac OSX ou Linux. Nous le déconseillons donc fortement car il n’est pas reproductible</p>
</div>
</div>
<p>Les <code>header = TRUE</code> spécifie que la première ligne de vos données contient les noms des variables (c.-à-d. <code>food</code>, <code>block</code> etc.) Si ce n’est pas le cas, vous pouvez spécifier <code>header = FALSE</code> (en fait, c’est la valeur par défaut, vous pouvez donc omettre complètement cet argument). L’argument <code>sep = ","</code> indique à R quel est le délimiteur de fichier.</p>
<p>D’autres arguments utiles sont <code>dec =</code> et <code>na.strings =</code>. Les <code>dec =</code> permet de modifier le caractère par défaut (<code>.</code>) utilisé par défaut pour le point décimal. Ceci est utile si vous êtes dans un pays où les décimales sont généralement représentées par une virgule (c.-à-d. <code>dec = ","</code>). L’argument <code>na.strings =</code> vous permet d’importer des données où les valeurs manquantes sont représentées par un symbole autre que <code>NA</code>. Cela peut être assez courant si vous importez des données à partir d’un autre logiciel statistique tel que Minitab, qui représente les valeurs manquantes avec le symbole <code>*</code> (<code>na.strings = "*"</code>).</p>
<p>Une série de fonctions prédéfinies sont disponibles dans <code><a href="https://rdrr.io/r/utils/read.table.html">read.table()</a></code> pour définire des options spécifiques au format. Mais nous pouvons aussi simplement utiliser <code><a href="https://rdrr.io/r/utils/read.table.html">read.csv()</a></code>pour lire un fichier csv, avec la séparation “,” et “.” pour les décimales. Dans les pays où “,” est utilisé pour les décimales, les fichiers csv utilisent “;” comme séparateur. Dans ce cas, l’utilisation de <code><a href="https://rdrr.io/r/utils/read.table.html">read.csv2()</a></code> serait nécessaire. Lorsque l’on travaille avec des fichiers délimités par des tabulations, les fonctions <code><a href="https://rdrr.io/r/utils/read.table.html">read.delim()</a></code> et <code><a href="https://rdrr.io/r/utils/read.table.html">read.delim2()</a></code> peuvent être utilisées avec “.” et “,” comme décimales respectivement.</p>
<p>Après avoir importé nos données dans R, pour voir le contenu du jeu de données, il suffit de taper le nom de l’objet comme nous l’avons fait précédemment. <strong>MAIS</strong> avant de faire cela, réfléchissez à la raison pour laquelle vous faites cela. Si votre jeu de données est autre chose que minuscule, tout ce que vous allez faire, c’est remplir votre Console de données. Ce n’est pas comme si vous pouviez facilement vérifier s’il y a des erreurs ou si vos données ont été importées correctement. Une bien meilleure solution consiste à utiliser notre vieil ami, la fonction <code><a href="https://rdrr.io/r/utils/str.html">str()</a></code> pour obtenir un résumé compact et informatif de votre base de données.</p>
<div class="cell">
<div class="sourceCode" id="cb60"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">licornes</span><span class="op">)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   96 obs. of  8 variables:
 $ p_care    : Factor w/ 2 levels "care","no_care": 1 1 1 1 1 1 1 1 1 1 ...
 $ food      : Factor w/ 3 levels "high","low","medium": 3 3 3 3 3 3 3 3 3 3 ...
 $ block     : int  1 1 1 1 1 1 1 1 2 2 ...
 $ height    : num  7.5 10.7 11.2 10.4 10.4 9.8 6.9 9.4 10.4 12.3 ...
 $ weight    : num  7.62 12.14 12.76 8.78 13.58 ...
 $ mane_size : num  11.7 14.1 7.1 11.9 14.5 12.2 13.2 14 10.5 16.1 ...
 $ fluffyness: num  31.9 46 66.7 20.3 26.9 72.7 43.1 28.5 57.8 36.9 ...
 $ horn_rings: int  1 10 10 1 4 9 7 6 5 8 ...</code></pre>
</div>
</div>
<p>Ici, nous voyons que <code>licornes</code> est un objet “data.frame” qui contient 96 lignes et 8 variables (colonnes). Chacune des variables est répertoriée avec sa classe de données et les 10 premières valeurs. Comme nous l’avons mentionné précédemment dans ce chapitre, il peut être très pratique de copier/coller ces données dans votre script R sous la forme d’un bloc de commentaires afin de pouvoir s’y référer ultérieurement.</p>
<p>Notez également que vos variables de type chaîne de caractères (<code>care</code> et <code>food</code>) ont été importées en tant que facteurs parce que nous avons utilisé l’argument <code>stringsAsFactors = TRUE</code>. Si ce n’est pas ce que vous voulez, vous pouvez utiliser l’argument <code>stringsAsFactors = FALSE</code> ou à partir de la version 4.0.0 de R, vous pouvez simplement ne pas utiliser cet argument car <code>stringsAsFactors = FALSE</code> est la valeur par défaut.</p>
<p>Nous pouvons donc aussi extraire le jeu de données depuis un fichier texte (.txt) grâce à la fonction <code><a href="https://rdrr.io/r/utils/read.table.html">read.delim()</a></code> :</p>
<div class="cell">
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">licornes</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.delim</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"data/unicorns.txt"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">licornes</span><span class="op">)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   96 obs. of  8 variables:
 $ p_care    : chr  "care" "care" "care" "care" ...
 $ food      : chr  "medium" "medium" "medium" "medium" ...
 $ block     : int  1 1 1 1 1 1 1 1 2 2 ...
 $ height    : num  7.5 10.7 11.2 10.4 10.4 9.8 6.9 9.4 10.4 12.3 ...
 $ weight    : num  7.62 12.14 12.76 8.78 13.58 ...
 $ mane_size : num  11.7 14.1 7.1 11.9 14.5 12.2 13.2 14 10.5 16.1 ...
 $ fluffyness: num  31.9 46 66.7 20.3 26.9 72.7 43.1 28.5 57.8 36.9 ...
 $ horn_rings: int  1 10 10 1 4 9 7 6 5 8 ...</code></pre>
</div>
</div>
<p>Si nous voulons simplement voir les noms de nos variables (colonnes) dans le jeu de données, nous pouvons utiliser l’argument <code><a href="https://rdrr.io/r/base/names.html">names()</a></code> qui renverra un vecteur de caractères contenant les noms des variables.</p>
<div class="cell">
<div class="sourceCode" id="cb64"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">licornes</span><span class="op">)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "p_care"     "food"       "block"      "height"     "weight"    
[6] "mane_size"  "fluffyness" "horn_rings"</code></pre>
</div>
</div>
<p>Vous pouvez même importer des feuilles de calcul de MS Excel ou d’autres logiciels de statistiques directement dans R, mais nous vous conseillons d’éviter cette méthode dans la mesure du possible, car elle ne fait qu’ajouter une couche d’incertitude entre vous et vos données. À notre avis, il est presque toujours préférable d’exporter vos feuilles de calcul sous forme de fichiers délimités par des tabulations (.txt) ou des virgules (.csv), puis de les importer dans R à l’aide de l’un des fonctions dérivées de <code><a href="https://rdrr.io/r/utils/read.table.html">read.table()</a></code> (c-à-d.&nbsp;<code><a href="https://rdrr.io/r/utils/read.table.html">read.delim()</a></code>, <code><a href="https://rdrr.io/r/utils/read.table.html">read.csv()</a></code>, etc.). Si vous tenez absolument à importer directement des données à partir d’un autre logiciel, vous devrez installer le paquet <code>foreign</code> <span class="emoji" data-emoji="package">📦</span> qui contient des fonctions permettant d’importer des fichiers Minitab, SPSS, Stata et SAS. Pour les feuilles de calcul MS Excel et LO Calc, quelques paquets peuvent être utilisés.</p>
</section><section id="frustrations-courantes-liées-à-limportation" class="level3" data-number="3.3.3"><h3 data-number="3.3.3" class="anchored" data-anchor-id="frustrations-courantes-liées-à-limportation">
<span class="header-section-number">3.3.3</span> Frustrations courantes liées à l’importation</h3>
<p>Il est assez courant d’obtenir un tas de messages d’erreur vraiment frustrants lorsque l’on commence à importer des données dans R. Le plus courant est sans doute</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>Error <span class="cf">in</span> <span class="fu">file</span>(file, <span class="st">"rt"</span>) <span class="sc">:</span> cannot open the connection</span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>In addition<span class="sc">:</span> Warning message<span class="sc">:</span></span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>In <span class="fu">file</span>(file, <span class="st">"rt"</span>) <span class="sc">:</span></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>  cannot open file <span class="st">'unicorns.txt'</span><span class="sc">:</span> No such file or directory</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Ce message d’erreur vous indique que R ne peut pas trouver le fichier que vous essayez d’importer. Il apparaît généralement pour l’une ou l’autre des raisons suivantes (ou pour toutes !). La première est que vous avez fait une erreur dans l’orthographe du nom de fichier ou du chemin d’accès au fichier. Une autre erreur fréquente est d’avoir oublié d’inclure l’extension du fichier dans le nom du fichier (par ex. <code>.txt</code>). Enfin, le fichier ne se trouve pas à l’endroit indiqué ou vous avez utilisé un chemin d’accès incorrect. L’utilisation de projets RStudio (<a href="01-debut.html#sec-rsprojs" class="quarto-xref"><span>Section 1.5</span></a>) et d’une structure de répertoire logique (<a href="01-debut.html#sec-dir-struc" class="quarto-xref"><span>Section 1.4</span></a>) permet d’éviter (limiter) ce type d’erreurs.</p>
<p>Une autre erreur très fréquente est d’oublier d’inclure l’élément <code>header = TRUE</code> lorsque la première ligne des données contient des noms de variables. Par exemple, si nous omettons cet argument lorsque nous importons notre fichier <code>unicorns.txt</code> tout semble correct au début (pas de message d’erreur au moins).</p>
<div class="cell">
<div class="sourceCode" id="cb67"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">licornes_erreur</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.table</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"data/unicorns.txt"</span>, sep <span class="op">=</span> <span class="st">"\t"</span><span class="op">)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>mais lorsque nous jetons un coup d’œil à notre jeu de données en utilisant <code><a href="https://rdrr.io/r/utils/str.html">str()</a></code></p>
<div class="cell">
<div class="sourceCode" id="cb68"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">licornes_erreur</span><span class="op">)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   97 obs. of  8 variables:
 $ V1: chr  "p_care" "care" "care" "care" ...
 $ V2: chr  "food" "medium" "medium" "medium" ...
 $ V3: chr  "block" "1" "1" "1" ...
 $ V4: chr  "height" "7.5" "10.7" "11.2" ...
 $ V5: chr  "weight" "7.62" "12.14" "12.76" ...
 $ V6: chr  "mane_size" "11.7" "14.1" "7.1" ...
 $ V7: chr  "fluffyness" "31.9" "46" "66.7" ...
 $ V8: chr  "horn_rings" "1" "10" "10" ...</code></pre>
</div>
</div>
<p>Nous constatons un problème évident, toutes nos variables ont été importées en tant que facteurs et sont nommées <code>V1</code>, <code>V2</code>, <code>V3</code> … <code>V8</code>. Le problème vient du fait que nous n’avons pas dit au <code><a href="https://rdrr.io/r/utils/read.table.html">read.table()</a></code> que la première ligne contient les noms des variables et donc elle les traite comme des données. Dès que nous avons une chaîne de caractères dans l’une de nos variable, R les traite comme des données de type caractère (rappelez-vous que tous les éléments d’un vecteur doivent contenir le même type de données (<a href="#sec-scal-vecs" class="quarto-xref"><span>Section 3.2.1</span></a>)).</p>
<p>Ce n’est qu’un argument de plus pour utiliser <code><a href="https://rdrr.io/r/utils/read.table.html">read.csv()</a></code> ou <code><a href="https://rdrr.io/r/utils/read.table.html">read.delim()</a></code> avec des valeurs par défaut appropriées pour les arguments.</p>
</section><section id="sec-import-other" class="level3" data-number="3.3.4"><h3 data-number="3.3.4" class="anchored" data-anchor-id="sec-import-other">
<span class="header-section-number">3.3.4</span> Autres options d’importation</h3>
<p>Il existe de nombreuses autres fonctions permettant d’importer des données à partir d’une variété de sources et de formats. La plupart de ces fonctions sont contenues dans des paquets que vous devez installer avant de les utiliser. Vous trouverez ci-dessous une liste des paquets et des fonctions les plus utiles.</p>
<p>Les paquets <code><a href="https://rdatatable.gitlab.io/data.table/reference/fread.html">fread()</a></code> du paquet <code>data.table</code> <span class="emoji" data-emoji="package">📦</span> est idéale pour importer rapidement et efficacement de grands fichiers de données (beaucoup plus rapidement que la fonction <code><a href="https://rdrr.io/r/utils/read.table.html">read.table()</a></code>). L’un des aspects les plus intéressants de la fonction <code><a href="https://rdatatable.gitlab.io/data.table/reference/fread.html">fread()</a></code> est qu’elle détecte automatiquement la plupart des arguments que vous devriez normalement spécifier (comme <code>sep =</code> etc.) Une choses à prendre en compte cependant est que la fonction <code><a href="https://rdatatable.gitlab.io/data.table/reference/fread.html">fread()</a></code> renverra un objet de type <code>data.table</code> et non <code>data.frame</code> comme ce serait le cas avec la fonction <code><a href="https://rdrr.io/r/utils/read.table.html">read.table()</a></code>. Ce n’est généralement pas un problème, car vous pouvez passer un objet <code>data.table</code> à n’importe quelle fonction n’acceptant normalement que des objets <code>data.frame</code>. Pour en savoir plus sur les différences entre <code>data.table</code> et <code>data.frame</code> voir <a href="http://datatable.r-forge.r-project.org/datatable-intro.pdf">ici</a> .</p>
<div class="cell">
<div class="sourceCode" id="cb70"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com">data.table</a></span><span class="op">)</span></span>
<span><span class="va">toutes_donnees</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/fread.html">fread</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"data/unicorns.txt"</span><span class="op">)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Diverses fonctions du paquet <code>readr</code> <span class="emoji" data-emoji="package">📦</span> sont également très efficaces pour lire des fichiers de données volumineux. Le paquet <code>readr</code> <span class="emoji" data-emoji="package">📦</span> fait partie de la collection de paquet ‘<a href="https://www.tidyverse.org/">tidyverse</a>’ et fournit de nombreuses fonctions équivalentes à celles de la version de base de R pour l’importation de données. Les fonctions de <code>readr</code> sont utilisées de la même manière que les fonctions <code><a href="https://rdrr.io/r/utils/read.table.html">read.table()</a></code> ou <code><a href="https://rdrr.io/r/utils/read.table.html">read.csv()</a></code> et la plupart des arguments sont les mêmes (voir <code><a href="https://readr.tidyverse.org/reference/read_table.html">?readr::read_table</a></code> pour plus de détails). Il existe cependant quelques différences. Par exemple, lors de l’utilisation de l’option <code><a href="https://readr.tidyverse.org/reference/read_table.html">read_table()</a></code> l’argument <code>header = TRUE</code> est remplacé par <code>col_names = TRUE</code> et la fonction renvoie un objet de classe <code>tibble</code> qui est l’équivalent dans le tidyverse d’un objet de classe <code>data.frame</code> (voir <a href="https://blog.rstudio.com/2016/03/24/tibble-1-0-0/">ici</a> pour les différences).</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Avertissement
</div>
</div>
<div class="callout-body-container callout-body">
<p>Attention ! certain.e.s de vos modèles ou fonctions, etc. peuvent ne pas fonctionner ou fonctionner différement à cause de ça (vérifier/reconvertir votre jeu de données au format <code>data.frame</code> peut vous économiser du temps de débeugage).</p>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb71"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://readr.tidyverse.org">readr</a></span><span class="op">)</span></span>
<span><span class="co"># importation de fichiers délimités par des espaces blancs</span></span>
<span><span class="va">toutes_donnees</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_table.html">read_table</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"data/unicorns.txt"</span>, col_names <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># importation de fichiers délimités par des virgules</span></span>
<span><span class="va">toutes_donnees</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"data/unicorns.csv"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># importation de fichiers délimités par des tabulations</span></span>
<span><span class="va">toutes_donnees</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_delim</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"data/unicorns.txt"</span>, delim <span class="op">=</span> <span class="st">"\t"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># ou utilisez</span></span>
<span><span class="va">toutes_donnees</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_tsv</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"data/unicorns.txt"</span><span class="op">)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Si votre fichier de données est énorme, les paquets <code>ff</code> <span class="emoji" data-emoji="package">📦</span> et <code>bigmemory</code> <span class="emoji" data-emoji="package">📦</span> peuvent être utiles car ils contiennent tous deux des fonctions d’importation capables de stocker des données volumineuses de manière efficace en termes de mémoire. Pour en savoir plus sur ces fonctions <a href="https://www.rdocumentation.org/packages/ff/versions/2.2-14/topics/read.table.ffdf">ici</a> et <a href="https://cran.r-project.org/web/packages/bigmemory/bigmemory.pdf">ici</a> .</p>
</section></section><section id="manipuler-des-jeux-de-données" class="level2" data-number="3.4"><h2 data-number="3.4" class="anchored" data-anchor-id="manipuler-des-jeux-de-données">
<span class="header-section-number">3.4</span> Manipuler des jeux de données</h2>
<p>Maintenant que vous avez réussi à importer vos données dans R depuis un fichier externe, la prochaine étape est de faire quelque chose d’utile avec nos données. La manipulation de données est une compétence fondamentale que vous devrez développer et avec laquelle vous devrez vous sentir à l’aise, car vous en ferez probablement beaucoup au cours de n’importe quel projet. La bonne nouvelle, c’est que R est particulièrement efficace pour manipuler, résumer et visualiser les données. La manipulation de données (souvent connue sous le nom de “data wrangling” ou “munging”) en R peut sembler un peu intimidante au début pour un nouvel utilisateur, mais si vous suivez quelques règles logiques simples, vous prendrez rapidement le coup de main, surtout avec un peu de pratique.</p>
<p>Rappelons la structure du jeu de données <code>licornes</code> que nous avons importée dans la section précédente :</p>
<div class="cell">
<div class="sourceCode" id="cb72"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">licornes</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.table</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"data/unicorns.txt"</span>, header <span class="op">=</span> <span class="cn">TRUE</span>, sep <span class="op">=</span> <span class="st">"\t"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">licornes</span><span class="op">)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   96 obs. of  8 variables:
 $ p_care    : chr  "care" "care" "care" "care" ...
 $ food      : chr  "medium" "medium" "medium" "medium" ...
 $ block     : int  1 1 1 1 1 1 1 1 2 2 ...
 $ height    : num  7.5 10.7 11.2 10.4 10.4 9.8 6.9 9.4 10.4 12.3 ...
 $ weight    : num  7.62 12.14 12.76 8.78 13.58 ...
 $ mane_size : num  11.7 14.1 7.1 11.9 14.5 12.2 13.2 14 10.5 16.1 ...
 $ fluffyness: num  31.9 46 66.7 20.3 26.9 72.7 43.1 28.5 57.8 36.9 ...
 $ horn_rings: int  1 10 10 1 4 9 7 6 5 8 ...</code></pre>
</div>
</div>
<p>Pour accéder aux données de n’importe quelle variable (colonne) de notre jeu de données, nous pouvons utiliser la notation <code>$</code>. Par exemple, pour accéder à la variable <code>height</code> dans le jeu de données <code>licornes</code> on écrit <code>licornes$height</code>. Cela indique à R que la variable <code>height</code> est contenue dans le jeu de données <code>licornes</code>.</p>
<div class="cell">
<div class="sourceCode" id="cb74"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">licornes</span><span class="op">$</span><span class="va">height</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  7.5 10.7 11.2 10.4 10.4  9.8  6.9  9.4 10.4 12.3 10.4 11.0  7.1  6.0  9.0
[16]  4.5 12.6 10.0 10.0  8.5 14.1 10.1  8.5  6.5 11.5  7.7  6.4  8.8  9.2  6.2
[31]  6.3 17.2  8.0  8.0  6.4  7.6  9.7 12.3  9.1  8.9  7.4  3.1  7.9  8.8  8.5
[46]  5.6 11.5  5.8  5.6  5.3  7.5  4.1  3.5  8.5  4.9  2.5  5.4  3.9  5.8  4.5
[61]  8.0  1.8  2.2  3.9  8.5  8.5  6.4  1.2  2.6 10.9  7.2  2.1  4.7  5.0  6.5
[76]  2.6  6.0  9.3  4.6  5.2  3.9  2.3  5.2  2.2  4.5  1.8  3.0  3.7  2.4  5.7
[91]  3.7  3.2  3.9  3.3  5.5  4.4</code></pre>
</div>
</div>
<p>Cette opération renvoie un vecteur des données de la variable <code>height</code>. Si nous le souhaitons, nous pouvons assigner ce vecteur à un autre objet et faire d’autres choses avec, comme calculer une moyenne ou obtenir un résumé de la variable à l’aide de la fonction <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code> :</p>
<div class="cell">
<div class="sourceCode" id="cb76"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">f_taille</span> <span class="op">&lt;-</span> <span class="va">licornes</span><span class="op">$</span><span class="va">height</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">f_taille</span><span class="op">)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 6.839583</code></pre>
</div>
<div class="sourceCode" id="cb78"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">f_taille</span><span class="op">)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  1.200   4.475   6.450   6.840   9.025  17.200 </code></pre>
</div>
</div>
<p>Ou si nous ne voulons pas créer un objet supplémentaire, nous pouvons utiliser des fonctions “à la volée” pour afficher uniquement la valeur dans la console.</p>
<div class="cell">
<div class="sourceCode" id="cb80"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">licornes</span><span class="op">$</span><span class="va">height</span><span class="op">)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 6.839583</code></pre>
</div>
<div class="sourceCode" id="cb82"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">licornes</span><span class="op">$</span><span class="va">height</span><span class="op">)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  1.200   4.475   6.450   6.840   9.025  17.200 </code></pre>
</div>
</div>
<p>Tout comme nous l’avons fait avec les vecteurs (<a href="02-base.html#sec-vectors" class="quarto-xref"><span>Section 2.5</span></a>), nous pouvons également accéder aux données contenues dans le jeu de données en utilisant les crochets <code>[ ]</code>. Cependant, au lieu d’utiliser un seul index, nous devons maintenant utiliser deux index, l’un pour spécifier les lignes et l’autre pour les colonnes. Pour ce faire, nous pouvons utiliser la notation <code>mes_donnees[ligne, colonne]</code> où <code>ligne</code> et <code>colonne</code> sont des indices et <code>mes_donnees</code> est le nom du jeu de données. Une fois encore, comme pour nos vecteurs, nos index peuvent être positionnels ou résulter d’un test logique.</p>
<section id="index-positionnels" class="level3" data-number="3.4.1"><h3 data-number="3.4.1" class="anchored" data-anchor-id="index-positionnels">
<span class="header-section-number">3.4.1</span> Index positionnels</h3>
<p>Pour utiliser les index positionnels, il suffit d’écrire la position des lignes et des colonnes que l’on veut extraire à l’intérieur des crochets <code>[ ]</code>. Par exemple, si, pour une raison quelconque, nous voulons extraire la première valeur (1<sup>ère</sup> ligne) de la variable <code>height</code> (4<sup>e</sup> colonne) :</p>
<div class="cell">
<div class="sourceCode" id="cb84"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">licornes</span><span class="op">[</span><span class="fl">1</span>, <span class="fl">4</span><span class="op">]</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 7.5</code></pre>
</div>
<div class="sourceCode" id="cb86"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># on peut obtenir le même résultat avec cette notation :</span></span>
<span><span class="va">licornes</span><span class="op">$</span><span class="va">height</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 7.5</code></pre>
</div>
</div>
<p>Nous pouvons également extraire les valeurs de plusieurs lignes ou colonnes en spécifiant ces index sous forme de vecteurs à l’intérieur des crochets <code>[ ]</code>. Pour extraire les 10 premières lignes et les 4 premières colonnes, il suffit de fournir un vecteur contenant une séquence de 1 à 10 pour l’index des lignes (<code>1:10</code>) et un vecteur de 1 à 4 pour l’index des colonnes (<code>1:4</code>) :</p>
<div class="cell">
<div class="sourceCode" id="cb88"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">licornes</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   p_care   food block height
1    care medium     1    7.5
2    care medium     1   10.7
3    care medium     1   11.2
4    care medium     1   10.4
5    care medium     1   10.4
6    care medium     1    9.8
7    care medium     1    6.9
8    care medium     1    9.4
9    care medium     2   10.4
10   care medium     2   12.3</code></pre>
</div>
</div>
<p>Si les lignes et les colonnes ne sont pas séquentielles, nous pouvons fournir des vecteurs de positions à l’aide de la fonction <code><a href="https://rdrr.io/r/base/c.html">c()</a></code>. Pour extraire les 1<sup>ère</sup>, 5<sup>e</sup>, 12<sup>e</sup> et 30<sup>e</sup> lignes des 1<sup>ère</sup>, 3<sup>e</sup>, 6<sup>e</sup> et 8<sup>e</sup> colonnes :</p>
<div class="cell">
<div class="sourceCode" id="cb90"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">licornes</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">5</span>, <span class="fl">12</span>, <span class="fl">30</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">6</span>, <span class="fl">8</span><span class="op">)</span><span class="op">]</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   p_care block mane_size horn_rings
1    care     1      11.7          1
5    care     1      14.5          4
12   care     2      12.6          6
30   care     2      11.6          5</code></pre>
</div>
</div>
<p>Tout ce que nous faisons dans les deux exemples ci-dessus est de créer des vecteurs de positions pour les lignes et les colonnes que nous voulons extraire. Pour ce faire, nous avons utilisé les compétences que nous avons développées dans la <a href="02-base.html#sec-funcs" class="quarto-xref"><span>Section 2.4</span></a> lorsque nous avons généré des vecteurs à l’aide de la fonction <code><a href="https://rdrr.io/r/base/c.html">c()</a></code> ou en utilisant la notation <code>:</code>.</p>
<p>Mais qu’en est-il si nous voulons extraire toutes les lignes ou toutes les colonnes ? Il serait extrêmement fastidieux de devoir générer des vecteurs pour toutes les lignes ou pour toutes les colonnes. Heureusement, R dispose d’un raccourci. Si vous ne spécifiez pas d’index de ligne ou de colonne dans les crochets <code>[ ]</code> R interprète cela comme signifiant que vous voulez toutes les lignes ou toutes les colonnes. Par exemple, pour extraire les 4 premières lignes et toutes les colonnes du jeu de données <code>licornes</code> :</p>
<div class="cell">
<div class="sourceCode" id="cb92"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">licornes</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, <span class="op">]</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  p_care   food block height weight mane_size fluffyness horn_rings
1   care medium     1    7.5   7.62      11.7       31.9          1
2   care medium     1   10.7  12.14      14.1       46.0         10
3   care medium     1   11.2  12.76       7.1       66.7         10
4   care medium     1   10.4   8.78      11.9       20.3          1</code></pre>
</div>
</div>
<p>ou toutes les lignes et les 3 premières colonnes <a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> .</p>
<div class="sourceCode" id="cb94"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">unicorns</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>    p_care   food block
1     care medium     1
2     care medium     1
3     care medium     1
4     care medium     1
5     care medium     1
92 no_care    low     2
93 no_care    low     2
94 no_care    low     2
95 no_care    low     2
96 no_care    low     2</code></pre>
</div>
</div>
<p>Nous pouvons même utiliser des index de position négatifs pour exclure certaines lignes et colonnes. Par exemple, extrayons toutes les lignes à l’exception des 85 premières et toutes les colonnes à l’exception de la 4<sup>e</sup>, 7<sup>e</sup> et 8<sup>e</sup>. Remarquez que nous devons utiliser <code>-()</code> lorsque nous générons nos vecteurs de position de ligne. Si nous avions simplement utilisé <code>-1:85</code> cela générerait en fait une séquence régulière de -1 à 85, ce qui n’est pas ce que nous voulons (nous pouvons bien sûr utiliser <code>-1:-85</code>).</p>
<div class="cell">
<div class="sourceCode" id="cb96"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">licornes</span><span class="op">[</span><span class="op">-</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">85</span><span class="op">)</span>, <span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">7</span>, <span class="fl">8</span><span class="op">)</span><span class="op">]</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    p_care food block weight mane_size
86 no_care  low     1   6.01      17.6
87 no_care  low     1   9.93      12.0
88 no_care  low     1   7.03       7.9
89 no_care  low     2   9.10      14.5
90 no_care  low     2   9.05       9.6
91 no_care  low     2   8.10      10.5
92 no_care  low     2   7.45      14.1
93 no_care  low     2   9.19      12.4
94 no_care  low     2   8.92      11.6
95 no_care  low     2   8.44      13.5
96 no_care  low     2  10.60      16.2</code></pre>
</div>
</div>
<p>Outre l’utilisation d’un index de position pour extraire des colonnes (variables) particulières, nous pouvons également nommer les variables directement en utilisant les crochet <code>[ ]</code>. Par exemple, extrayons les 5 premières lignes des variables <code>care</code>, <code>food</code> et <code>mane_size</code>. Au lieu d’utiliser <code>licornes[1:5, c(1, 2, 6)]</code> nous pouvons utiliser :</p>
<div class="cell">
<div class="sourceCode" id="cb98"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">licornes</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"p_care"</span>, <span class="st">"food"</span>, <span class="st">"mane_size"</span><span class="op">)</span><span class="op">]</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  p_care   food mane_size
1   care medium      11.7
2   care medium      14.1
3   care medium       7.1
4   care medium      11.9
5   care medium      14.5</code></pre>
</div>
</div>
<p>En général, on préférera utiliser cette méthode plutôt que l’index positionnel pour sélectionner les colonnes, car elle nous donnera toujours ce que nous voulons même si nous avons changé l’ordre des colonnes dans notre jeu de données pour une raison quelconque.</p>
</section><section id="index-logiques" class="level3" data-number="3.4.2"><h3 data-number="3.4.2" class="anchored" data-anchor-id="index-logiques">
<span class="header-section-number">3.4.2</span> Index logiques</h3>
<p>Tout comme nous l’avons fait avec les vecteurs, nous pouvons également extraire des données de notre jeu de données sur la base d’un test logique. Nous pouvons utiliser tous les opérateurs logiques que nous avons utilisés dans les exemples des vecteurs. Si ceux-ci vous ont échappé, jetez un coup d’œil à la <a href="02-base.html#sec-logical-index" class="quarto-xref"><span>Section 2.5.1.1</span></a> pour vous rafraîchir la mémoire. Extrayons toutes les lignes pour lesquelles la variable <code>height</code> a une valeur supérieure à 12 et extrayons toutes les colonnes par défaut (rappelez-vous, si vous n’incluez pas d’index de colonne après la virgule, cela signifie toutes les colonnes).</p>
<div class="cell">
<div class="sourceCode" id="cb100"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">grandes_cornes</span> <span class="op">&lt;-</span> <span class="va">licornes</span><span class="op">[</span><span class="va">licornes</span><span class="op">$</span><span class="va">height</span> <span class="op">&gt;</span> <span class="fl">12</span>, <span class="op">]</span></span>
<span><span class="va">grandes_cornes</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   p_care   food block height weight mane_size fluffyness horn_rings
10   care medium     2   12.3  13.48      16.1       36.9          8
17   care   high     1   12.6  18.66      18.6       54.0          9
21   care   high     1   14.1  19.12      13.1      113.2         13
32   care   high     2   17.2  19.20      10.9       89.9         14
38   care    low     1   12.3  11.27      13.7       28.7          5</code></pre>
</div>
</div>
<p>Remarquez dans le code ci-dessus qu’il faut utiliser l’élément <code>licornes$height</code> pour le test logique. Si nous nommions simplement la variable <code>height</code> sans le nom du jeu de données, nous recevrions une erreur nous indiquant que R ne peut pas trouver la variable <code>height</code>. La raison en est que la variable <code>height</code> n’existe qu’à l’intérieur du jeu de données <code>licornes</code> vous devez donc indiquer à R où elle se trouve exactement.</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a>grandes_cornes <span class="ot">&lt;-</span> licornes[height <span class="sc">&gt;</span> <span class="dv">12</span>, ]</span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a>Error <span class="cf">in</span> <span class="st">`</span><span class="at">[.data.frame</span><span class="st">`</span>(licornes, height <span class="sc">&gt;</span> <span class="dv">12</span>, ) <span class="sc">:</span> </span>
<span id="cb102-3"><a href="#cb102-3" aria-hidden="true" tabindex="-1"></a>  object <span class="st">'height'</span> not found</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Comment cela fonctionne-t-il ? Le test logique est le suivant <code>licornes$height &gt; 12</code> et R n’extraira que les lignes qui satisfont à cette condition logique. Si nous regardons la sortie de la seule condition logique, vous pouvez voir qu’elle renvoie un vecteur contenant <code>TRUE</code> si <code>height</code> est supérieur à 12 et <code>FALSE</code> si <code>height</code> n’est pas supérieur à 12.</p>
<div class="cell">
<div class="sourceCode" id="cb103"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">licornes</span><span class="op">$</span><span class="va">height</span> <span class="op">&gt;</span> <span class="fl">12</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE
[13] FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE
[25] FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE
[37] FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[49] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[61] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[73] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[85] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE</code></pre>
</div>
</div>
<p>Notre indice de ligne est donc un vecteur contenant soit <code>TRUE</code> ou <code>FALSE</code> et seulement les lignes qui sont <code>TRUE</code> sont sélectionnées.</p>
<p>D’autres opérateurs couramment utilisés sont présentés ci-dessous :</p>
<div class="cell">
<div class="sourceCode" id="cb105"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">licornes</span><span class="op">[</span><span class="va">licornes</span><span class="op">$</span><span class="va">height</span> <span class="op">&gt;=</span> <span class="fl">6</span>, <span class="op">]</span> <span class="co"># valeurs supérieures ou égales à 6</span></span>
<span></span>
<span><span class="va">licornes</span><span class="op">[</span><span class="va">licornes</span><span class="op">$</span><span class="va">height</span> <span class="op">&lt;=</span> <span class="fl">6</span>, <span class="op">]</span> <span class="co"># valeurs inférieures ou égales à 6</span></span>
<span></span>
<span><span class="va">licornes</span><span class="op">[</span><span class="va">licornes</span><span class="op">$</span><span class="va">height</span> <span class="op">==</span> <span class="fl">8</span>, <span class="op">]</span> <span class="co"># valeurs égales à 8</span></span>
<span></span>
<span><span class="va">licornes</span><span class="op">[</span><span class="va">licornes</span><span class="op">$</span><span class="va">height</span> <span class="op">!=</span> <span class="fl">8</span>, <span class="op">]</span> <span class="co"># valeurs différentes de 8</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Nous pouvons également extraire des lignes en fonction de la valeur d’une chaîne de caractères ou d’un niveau de facteur. Extrayons toutes les lignes pour lesquelles la valeur de la variable <code>food</code> est égal à <code>high</code> (là encore, nous extrairons toutes les colonnes). Remarquez que la double égalité <code>==</code> doit être utilisé pour un test logique et que la chaîne de caractères doit être placée entre guillemets simples ou doubles (c.-à-d. <code>"high"</code>).</p>
<div class="cell">
<div class="sourceCode" id="cb106"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">nourriture_bcp</span> <span class="op">&lt;-</span> <span class="va">licornes</span><span class="op">[</span><span class="va">licornes</span><span class="op">$</span><span class="va">food</span> <span class="op">==</span> <span class="st">"high"</span>, <span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">nourriture_bcp</span>, n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/utils/head.html">tail</a></span><span class="op">(</span><span class="va">nourriture_bcp</span>, n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    p_care food block height weight mane_size fluffyness horn_rings
17    care high     1   12.6  18.66      18.6       54.0          9
18    care high     1   10.0  18.07      16.9       90.5          3
19    care high     1   10.0  13.29      15.8      142.7         12
20    care high     1    8.5  14.33      13.2       91.4          5
21    care high     1   14.1  19.12      13.1      113.2         13
22    care high     1   10.1  15.49      12.6       77.2         12
23    care high     1    8.5  17.82      20.5       54.4          3
24    care high     1    6.5  17.13      24.1      147.4          6
25    care high     2   11.5  23.89      14.3      101.5         12
26    care high     2    7.7  14.77      17.2      104.5          4
71 no_care high     1    7.2  15.21      15.9      135.0         14
72 no_care high     1    2.1  19.15      15.6      176.7          6
73 no_care high     2    4.7  13.42      19.8      124.7          5
74 no_care high     2    5.0  16.82      17.3      182.5         15
75 no_care high     2    6.5  14.00      10.1      126.5          7
76 no_care high     2    2.6  18.88      16.4      181.5         14
77 no_care high     2    6.0  13.68      16.2      133.7          2
78 no_care high     2    9.3  18.75      18.4      181.1         16
79 no_care high     2    4.6  14.65      16.7       91.7         11
80 no_care high     2    5.2  17.70      19.1      181.1          8</code></pre>
</div>
</div>
<p>Ou nous pouvons extraire toutes les lignes où <code>food</code> est différent de <code>medium</code> (en utilisant <code>!=</code>) et ne sélectionner que les colonnes 1 à 4.</p>
<div class="cell">
<div class="sourceCode" id="cb108"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">nourriture_pas_moyenne</span> <span class="op">&lt;-</span> <span class="va">licornes</span><span class="op">[</span><span class="va">licornes</span><span class="op">$</span><span class="va">food</span> <span class="op">!=</span> <span class="st">"medium"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">nourriture_pas_moyenne</span>, n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/utils/head.html">tail</a></span><span class="op">(</span><span class="va">nourriture_pas_moyenne</span>, n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    p_care food block height
17    care high     1   12.6
18    care high     1   10.0
19    care high     1   10.0
20    care high     1    8.5
21    care high     1   14.1
22    care high     1   10.1
23    care high     1    8.5
24    care high     1    6.5
25    care high     2   11.5
26    care high     2    7.7
87 no_care  low     1    3.0
88 no_care  low     1    3.7
89 no_care  low     2    2.4
90 no_care  low     2    5.7
91 no_care  low     2    3.7
92 no_care  low     2    3.2
93 no_care  low     2    3.9
94 no_care  low     2    3.3
95 no_care  low     2    5.5
96 no_care  low     2    4.4</code></pre>
</div>
</div>
<p>Nous pouvons accroître la complexité de nos tests logiques en les combinant avec des <a href="https://en.wikipedia.org/wiki/Boolean_expression">des expressions booléennes</a> comme nous l’avons fait pour les objets vectoriels. Par exemple, pour extraire toutes les lignes où la taille (<code>height</code>) est supérieure ou égale à <code>6</code> ET <code>food</code> est égal à <code>medium</code> ET <code>care</code> est égal à <code>no_care</code> nous combinons une série d’expressions logiques avec le symbole <code>&amp;</code> :</p>
<div class="cell">
<div class="sourceCode" id="cb110"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">faible_soins_non_taille6</span> <span class="op">&lt;-</span> <span class="va">licornes</span><span class="op">[</span><span class="va">licornes</span><span class="op">$</span><span class="va">height</span> <span class="op">&gt;=</span> <span class="fl">6</span> <span class="op">&amp;</span></span>
<span>                                       <span class="va">licornes</span><span class="op">$</span><span class="va">food</span> <span class="op">==</span> <span class="st">"medium"</span> <span class="op">&amp;</span></span>
<span>                                       <span class="va">licornes</span><span class="op">$</span><span class="va">p_care</span> <span class="op">==</span> <span class="st">"no_care"</span>, <span class="op">]</span></span>
<span><span class="va">faible_soins_non_taille6</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    p_care   food block height weight mane_size fluffyness horn_rings
51 no_care medium     1    7.5  13.60      13.6      122.2         11
54 no_care medium     1    8.5  10.04      12.3      113.6          4
61 no_care medium     2    8.0  11.43      12.6       43.2         14</code></pre>
</div>
</div>
<p>Pour extraire des lignes sur la base d’une expression booléenne “OR” (“OU”), nous pouvons utiliser le symbole <code>|</code>. Extrayons toutes les lignes où la taille (<code>height</code>) est supérieure à 12,3 OU inférieure à 2,2.</p>
<div class="cell">
<div class="sourceCode" id="cb112"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">taille2.2_12.3</span> <span class="op">&lt;-</span> <span class="va">licornes</span><span class="op">[</span><span class="va">licornes</span><span class="op">$</span><span class="va">height</span> <span class="op">&gt;</span> <span class="fl">12.3</span> <span class="op">|</span> <span class="va">licornes</span><span class="op">$</span><span class="va">height</span> <span class="op">&lt;</span> <span class="fl">2.2</span>, <span class="op">]</span></span>
<span><span class="va">taille2.2_12.3</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    p_care   food block height weight mane_size fluffyness horn_rings
17    care   high     1   12.6  18.66      18.6       54.0          9
21    care   high     1   14.1  19.12      13.1      113.2         13
32    care   high     2   17.2  19.20      10.9       89.9         14
62 no_care medium     2    1.8  10.47      11.8      120.8          9
68 no_care   high     1    1.2  18.24      16.6      148.1          7
72 no_care   high     1    2.1  19.15      15.6      176.7          6
86 no_care    low     1    1.8   6.01      17.6       46.2          4</code></pre>
</div>
</div>
<p>Une autre méthode pour sélectionner des parties d’un jeu de données sur la base d’une expression logique consiste à utiliser la fonction <code><a href="https://rdrr.io/r/base/subset.html">subset()</a></code> au lieu des crochets <code>[ ]</code>. L’avantage d’utiliser <code><a href="https://rdrr.io/r/base/subset.html">subset()</a></code> est qu’il n’est plus nécessaire d’utiliser le symbole <code>$</code> pour spécifier des variables à l’intérieur du jeu de données, car le premier argument de la fonction est le nom du jeu de données à subdiviser. L’inconvénient est que <code><a href="https://rdrr.io/r/base/subset.html">subset()</a></code> est moins flexible que la notation <code>[ ]</code>.</p>
<div class="cell">
<div class="sourceCode" id="cb114"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">soins_moy_2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">licornes</span>, <span class="va">p_care</span> <span class="op">==</span> <span class="st">"care"</span> <span class="op">&amp;</span> <span class="va">food</span> <span class="op">==</span> <span class="st">"medium"</span> <span class="op">&amp;</span> <span class="va">block</span> <span class="op">==</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">soins_moy_2</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   p_care   food block height weight mane_size fluffyness horn_rings
9    care medium     2   10.4  10.48      10.5       57.8          5
10   care medium     2   12.3  13.48      16.1       36.9          8
11   care medium     2   10.4  13.18      11.1       56.8         12
12   care medium     2   11.0  11.56      12.6       31.3          6
13   care medium     2    7.1   8.16      29.6        9.7          2
14   care medium     2    6.0  11.22      13.0       16.4          3
15   care medium     2    9.0  10.20      10.8       90.1          6
16   care medium     2    4.5  12.55      13.4       14.4          6</code></pre>
</div>
</div>
<p>Et si vous ne voulez que certaines colonnes, vous pouvez utiliser l’arguement <code>select =</code> :</p>
<div class="cell">
<div class="sourceCode" id="cb116"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">uni_p_care</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">licornes</span>, <span class="va">p_care</span> <span class="op">==</span> <span class="st">"care"</span> <span class="op">&amp;</span> <span class="va">food</span> <span class="op">==</span> <span class="st">"medium"</span> <span class="op">&amp;</span> <span class="va">block</span> <span class="op">==</span> <span class="fl">2</span>,</span>
<span>  select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"p_care"</span>, <span class="st">"food"</span>, <span class="st">"mane_size"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">uni_p_care</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   p_care   food mane_size
9    care medium      10.5
10   care medium      16.1
11   care medium      11.1
12   care medium      12.6
13   care medium      29.6
14   care medium      13.0
15   care medium      10.8
16   care medium      13.4</code></pre>
</div>
</div>
</section><section id="ordonner-un-jeu-de-données" class="level3" data-number="3.4.3"><h3 data-number="3.4.3" class="anchored" data-anchor-id="ordonner-un-jeu-de-données">
<span class="header-section-number">3.4.3</span> Ordonner un jeu de données</h3>
<p>Rappelez-vous lorsque nous avons utilisé la fonction <code><a href="https://rdrr.io/r/base/order.html">order()</a></code> pour ordonner un vecteur en fonction de l’ordre d’un autre vecteur (dans la <a href="02-base.html#sec-vec-ord" class="quarto-xref"><span>Section 2.5.3</span></a>). Cette fonction est très utile si vous souhaitez réorganiser les lignes de votre jeu de données. Par exemple, si nous voulons que toutes les lignes du jeu de données <code>licornes</code> soient classées par ordre croissant en fonction de la variable <code>height</code> et éditer toutes les colonnes par défaut :</p>
<div class="cell">
<div class="sourceCode" id="cb118"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">taille_ord</span> <span class="op">&lt;-</span> <span class="va">licornes</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html">order</a></span><span class="op">(</span><span class="va">licornes</span><span class="op">$</span><span class="va">height</span><span class="op">)</span>, <span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">taille_ord</span>, n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    p_care   food block height weight mane_size fluffyness horn_rings
68 no_care   high     1    1.2  18.24      16.6      148.1          7
62 no_care medium     2    1.8  10.47      11.8      120.8          9
86 no_care    low     1    1.8   6.01      17.6       46.2          4
72 no_care   high     1    2.1  19.15      15.6      176.7          6
63 no_care medium     2    2.2  10.70      15.3       97.1          7
84 no_care    low     1    2.2   9.97       9.6       63.1          2
82 no_care    low     1    2.3   7.28      13.8       32.8          6
89 no_care    low     2    2.4   9.10      14.5       78.7          8
56 no_care medium     1    2.5  14.85      17.5       77.8         10
69 no_care   high     1    2.6  16.57      17.1      141.1          3</code></pre>
</div>
</div>
<p>Nous pouvons également ordonner par ordre décroissant d’une variable (i.e. <code>mane_size</code>) en utilisant l’argument <code>decreasing = TRUE</code> :</p>
<div class="cell">
<div class="sourceCode" id="cb120"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">taille_criniere_ord</span> <span class="op">&lt;-</span> <span class="va">licornes</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html">order</a></span><span class="op">(</span><span class="va">licornes</span><span class="op">$</span><span class="va">mane_size</span>, decreasing <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, <span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">taille_criniere_ord</span>, n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    p_care   food block height weight mane_size fluffyness horn_rings
70 no_care   high     1   10.9  17.22      49.2      189.6         17
13    care medium     2    7.1   8.16      29.6        9.7          2
24    care   high     1    6.5  17.13      24.1      147.4          6
65 no_care   high     1    8.5  22.53      20.8      166.9         16
23    care   high     1    8.5  17.82      20.5       54.4          3
66 no_care   high     1    8.5  17.33      19.8      184.4         12
73 no_care   high     2    4.7  13.42      19.8      124.7          5
80 no_care   high     2    5.2  17.70      19.1      181.1          8
17    care   high     1   12.6  18.66      18.6       54.0          9
49 no_care medium     1    5.6  11.03      18.6       49.9          8</code></pre>
</div>
</div>
<p>Nous pouvons même ordonner des jeux de données sur la base de plusieurs variables. Par exemple, pour ordonner le jeu de données <code>licornes</code> dans l’ordre croissant des deux variables <code>block</code> et <code>height</code> :</p>
<div class="cell">
<div class="sourceCode" id="cb122"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">bloc_taille_ord</span> <span class="op">&lt;-</span> <span class="va">licornes</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html">order</a></span><span class="op">(</span><span class="va">licornes</span><span class="op">$</span><span class="va">block</span>, <span class="va">licornes</span><span class="op">$</span><span class="va">height</span><span class="op">)</span>, <span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">bloc_taille_ord</span>, n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    p_care   food block height weight mane_size fluffyness horn_rings
68 no_care   high     1    1.2  18.24      16.6      148.1          7
86 no_care    low     1    1.8   6.01      17.6       46.2          4
72 no_care   high     1    2.1  19.15      15.6      176.7          6
84 no_care    low     1    2.2   9.97       9.6       63.1          2
82 no_care    low     1    2.3   7.28      13.8       32.8          6
56 no_care medium     1    2.5  14.85      17.5       77.8         10
69 no_care   high     1    2.6  16.57      17.1      141.1          3
87 no_care    low     1    3.0   9.93      12.0       56.6          6
53 no_care medium     1    3.5  12.93      16.6      109.3          3
88 no_care    low     1    3.7   7.03       7.9       36.7          5</code></pre>
</div>
</div>
<p>Et si nous voulions ordonner <code>licornes</code> par ordre croissant selon la variable <code>block</code> mais par ordre décroissant de <code>height</code>? Nous pouvons utiliser une astuce simple en ajoutant un <code>-</code> avant l’argument <code>licornes$height</code> lorsque nous utilisons la fonction <code><a href="https://rdrr.io/r/base/order.html">order()</a></code>. Cela transformera essentiellement toutes les valeurs de <code>height</code> en négatives, ce qui aura pour effet d’inverser l’ordre. Notez que cette astuce ne fonctionne qu’avec des variables numériques.</p>
<div class="cell">
<div class="sourceCode" id="cb124"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">bloc_invtaille_ord</span> <span class="op">&lt;-</span> <span class="va">licornes</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html">order</a></span><span class="op">(</span><span class="va">licornes</span><span class="op">$</span><span class="va">block</span>, <span class="op">-</span><span class="va">licornes</span><span class="op">$</span><span class="va">height</span><span class="op">)</span>, <span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">bloc_invtaille_ord</span>, n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/utils/head.html">tail</a></span><span class="op">(</span><span class="va">bloc_invtaille_ord</span>, n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    p_care   food block height weight mane_size fluffyness horn_rings
21    care   high     1   14.1  19.12      13.1      113.2         13
17    care   high     1   12.6  18.66      18.6       54.0          9
38    care    low     1   12.3  11.27      13.7       28.7          5
3     care medium     1   11.2  12.76       7.1       66.7         10
70 no_care   high     1   10.9  17.22      49.2      189.6         17
2     care medium     1   10.7  12.14      14.1       46.0         10
4     care medium     1   10.4   8.78      11.9       20.3          1
5     care medium     1   10.4  13.58      14.5       26.9          4
22    care   high     1   10.1  15.49      12.6       77.2         12
18    care   high     1   10.0  18.07      16.9       90.5          3
64 no_care medium     2    3.9  12.97      17.0       97.5          5
93 no_care    low     2    3.9   9.19      12.4       52.6          9
91 no_care    low     2    3.7   8.10      10.5       60.5          6
94 no_care    low     2    3.3   8.92      11.6       55.2          6
92 no_care    low     2    3.2   7.45      14.1       38.1          4
42    care    low     2    3.1   8.74      16.1       39.1          3
76 no_care   high     2    2.6  18.88      16.4      181.5         14
89 no_care    low     2    2.4   9.10      14.5       78.7          8
63 no_care medium     2    2.2  10.70      15.3       97.1          7
62 no_care medium     2    1.8  10.47      11.8      120.8          9</code></pre>
</div>
</div>
<p>Si nous voulons faire la même chose avec une variable de type facteur (ou caractère) comme <code>food</code> il faut utiliser la fonction <code><a href="https://rdrr.io/r/base/xtfrm.html">xtfrm()</a></code> sur cette variable, à l’intérieur de notre fonction <code><a href="https://rdrr.io/r/base/order.html">order()</a></code> :</p>
<div class="cell">
<div class="sourceCode" id="cb126"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">invnourriture_taille_ord</span> <span class="op">&lt;-</span> <span class="va">licornes</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html">order</a></span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/xtfrm.html">xtfrm</a></span><span class="op">(</span><span class="va">licornes</span><span class="op">$</span><span class="va">food</span><span class="op">)</span>, <span class="va">licornes</span><span class="op">$</span><span class="va">height</span><span class="op">)</span>, <span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">invnourriture_taille_ord</span>, n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/utils/head.html">tail</a></span><span class="op">(</span><span class="va">invnourriture_taille_ord</span>, n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    p_care   food block height weight mane_size fluffyness horn_rings
62 no_care medium     2    1.8  10.47      11.8      120.8          9
63 no_care medium     2    2.2  10.70      15.3       97.1          7
56 no_care medium     1    2.5  14.85      17.5       77.8         10
53 no_care medium     1    3.5  12.93      16.6      109.3          3
58 no_care medium     2    3.9   9.07       9.6       90.4          7
64 no_care medium     2    3.9  12.97      17.0       97.5          5
52 no_care medium     1    4.1  12.58      13.9      136.6         11
16    care medium     2    4.5  12.55      13.4       14.4          6
60 no_care medium     2    4.5  13.68      14.8      125.5          9
55 no_care medium     1    4.9   6.89       8.2       52.9          3
29    care   high     2    9.2  13.26      11.3      108.0          9
78 no_care   high     2    9.3  18.75      18.4      181.1         16
18    care   high     1   10.0  18.07      16.9       90.5          3
19    care   high     1   10.0  13.29      15.8      142.7         12
22    care   high     1   10.1  15.49      12.6       77.2         12
70 no_care   high     1   10.9  17.22      49.2      189.6         17
25    care   high     2   11.5  23.89      14.3      101.5         12
17    care   high     1   12.6  18.66      18.6       54.0          9
21    care   high     1   14.1  19.12      13.1      113.2         13
32    care   high     2   17.2  19.20      10.9       89.9         14</code></pre>
</div>
</div>
<p>Il est à noter que la variable <code>food</code> a été classée dans l’ordre alphabétique inverse et que la variable <code>height</code> a été ordonnée par valeurs croissantes, à l’intérieur de chaque niveau de <code>food</code>.</p>
<p>Si nous voulions ordonner le jeu de données selon les niveau de la variable <code>food</code>, c.-à-d.&nbsp;<code>low</code> –&gt; <code>medium</code> –&gt; <code>high</code> au lieu de l’ordre alphabétique par défaut (<code>high</code>, <code>low</code>, <code>medium</code>), nous devons d’abord modifier l’ordre des niveaux de <code>food</code> dans le jeu de données à l’aide de la fonction <code><a href="https://rdrr.io/r/base/factor.html">factor()</a></code>. Une fois que nous avons fait cela, nous pouvons utiliser la fonction <code><a href="https://rdrr.io/r/base/order.html">order()</a></code> comme d’habitude. Remarque : si vous lisez la version pdf de ce livre, la sortie a été tronquée pour économiser de l’espace.</p>
<div class="cell">
<div class="sourceCode" id="cb128"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">licornes</span><span class="op">$</span><span class="va">food</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">licornes</span><span class="op">$</span><span class="va">food</span>,</span>
<span>  levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"low"</span>, <span class="st">"medium"</span>, <span class="st">"high"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">nourriture_ord</span> <span class="op">&lt;-</span> <span class="va">licornes</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html">order</a></span><span class="op">(</span><span class="va">licornes</span><span class="op">$</span><span class="va">food</span><span class="op">)</span>, <span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">nourriture_ord</span>, n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/utils/head.html">tail</a></span><span class="op">(</span><span class="va">nourriture_ord</span>, n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    p_care food block height weight mane_size fluffyness horn_rings
33    care  low     1    8.0   6.88       9.3       16.1          4
34    care  low     1    8.0  10.23      11.9       88.1          4
35    care  low     1    6.4   5.97       8.7        7.3          2
36    care  low     1    7.6  13.05       7.2       47.2          8
37    care  low     1    9.7   6.49       8.1       18.0          3
38    care  low     1   12.3  11.27      13.7       28.7          5
39    care  low     1    9.1   8.96       9.7       23.8          3
40    care  low     1    8.9  11.48      11.1       39.4          7
41    care  low     2    7.4  10.89      13.3        9.5          5
42    care  low     2    3.1   8.74      16.1       39.1          3
71 no_care high     1    7.2  15.21      15.9      135.0         14
72 no_care high     1    2.1  19.15      15.6      176.7          6
73 no_care high     2    4.7  13.42      19.8      124.7          5
74 no_care high     2    5.0  16.82      17.3      182.5         15
75 no_care high     2    6.5  14.00      10.1      126.5          7
76 no_care high     2    2.6  18.88      16.4      181.5         14
77 no_care high     2    6.0  13.68      16.2      133.7          2
78 no_care high     2    9.3  18.75      18.4      181.1         16
79 no_care high     2    4.6  14.65      16.7       91.7         11
80 no_care high     2    5.2  17.70      19.1      181.1          8</code></pre>
</div>
</div>
</section><section id="ajout-de-colonnes-et-de-lignes" class="level3" data-number="3.4.4"><h3 data-number="3.4.4" class="anchored" data-anchor-id="ajout-de-colonnes-et-de-lignes">
<span class="header-section-number">3.4.4</span> Ajout de colonnes et de lignes</h3>
<p>Il est parfois utile de pouvoir ajouter des lignes et des colonnes de données supplémentaires à nos jeux de données. Il existe plusieurs façons d’y parvenir (comme toujours en R !) en fonction des circonstances. Pour ajouter simplement des lignes supplémentaires à un jeu de données existant, nous pouvons utiliser la fonction <code><a href="https://rdrr.io/r/base/cbind.html">rbind()</a></code> (<code>row</code>/‘ligne’ - <code>bind</code>/‘liaison’) <!-- JULIEN - Extra --> et pour ajouter des colonnes, la fonction <code><a href="https://rdrr.io/r/base/cbind.html">cbind()</a></code> (<code>columns</code>/‘colonnes’ - <code>bind</code>/‘liaison’) <!-- JULIEN - Extra -->. Créons quelques jeux de données test pour voir cela en action en utilisant notre vieille amie, la fonction <code><a href="https://rdrr.io/r/base/data.frame.html">data.frame()</a></code> :</p>
<div class="cell">
<div class="sourceCode" id="cb130"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># rbind pour les lignes ('rows')</span></span>
<span><span class="va">df1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span></span>
<span>  id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, taille <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">120</span>, <span class="fl">150</span>, <span class="fl">132</span>, <span class="fl">122</span><span class="op">)</span>,</span>
<span>  poids <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">44</span>, <span class="fl">56</span>, <span class="fl">49</span>, <span class="fl">45</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">df1</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  id taille poids
1  1    120    44
2  2    150    56
3  3    132    49
4  4    122    45</code></pre>
</div>
<div class="sourceCode" id="cb132"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">df2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span></span>
<span>  id <span class="op">=</span> <span class="fl">5</span><span class="op">:</span><span class="fl">6</span>, taille <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">119</span>, <span class="fl">110</span><span class="op">)</span>,</span>
<span>  poids <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">39</span>, <span class="fl">35</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">df2</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  id taille poids
1  5    119    39
2  6    110    35</code></pre>
</div>
<div class="sourceCode" id="cb134"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">df3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span></span>
<span>  id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, taille <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">120</span>, <span class="fl">150</span>, <span class="fl">132</span>, <span class="fl">122</span><span class="op">)</span>,</span>
<span>  poids <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">44</span>, <span class="fl">56</span>, <span class="fl">49</span>, <span class="fl">45</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">df3</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  id taille poids
1  1    120    44
2  2    150    56
3  3    132    49
4  4    122    45</code></pre>
</div>
<div class="sourceCode" id="cb136"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">df4</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>localisation <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"UK"</span>, <span class="st">"CZ"</span>, <span class="st">"CZ"</span>, <span class="st">"UK"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">df4</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  localisation
1           UK
2           CZ
3           CZ
4           UK</code></pre>
</div>
</div>
<p>Nous pouvons utiliser la fonction <code><a href="https://rdrr.io/r/base/cbind.html">rbind()</a></code> pour ajouter les lignes du jeu de données <code>df2</code> aux lignes de <code>df1</code> et créer le nouveau jeu de données à <code>df_lcomb</code> :</p>
<div class="cell">
<div class="sourceCode" id="cb138"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">df_lcomb</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="va">df1</span>, <span class="va">df2</span><span class="op">)</span></span>
<span><span class="va">df_lcomb</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  id taille poids
1  1    120    44
2  2    150    56
3  3    132    49
4  4    122    45
5  5    119    39
6  6    110    35</code></pre>
</div>
</div>
<p>Et <code>cbind</code> pour ajouter la colonne de <code>df4</code> à la colonne <code>df3</code> et l’assigner à <code>df_ccomb</code> :</p>
<div class="cell">
<div class="sourceCode" id="cb140"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">df_ccomb</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span><span class="op">(</span><span class="va">df3</span>, <span class="va">df4</span><span class="op">)</span></span>
<span><span class="va">df_ccomb</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  id height weight location
1  1    120     44       UK
2  2    150     56       CZ
3  3    132     49       CZ
4  4    122     45       UK</code></pre>
</div>
</div>
<p>Une autre situation dans laquelle l’ajout d’une nouvelle colonne à un jeu de données est utile est lorsque vous souhaitez effectuer une sorte de transformation sur une variable existante. Par exemple, supposons que nous voulions appliquer une transformation logarithmique, log<sub>10</sub> à une variable existante, la variable <code>taille</code> dans le jeu de données <code>df_rcomb</code> que nous avons créée ci-dessus. Nous pourrions simplement créer une variable distincte contenant ces valeurs, mais il est préférable de créer cette variable directement en tant que nouvelle colonne dans notre jeu de données existant afin de conserver toutes nos données ensemble. Appelons cette nouvelle variable <code>taille_log10</code>.</p>
<div class="cell">
<div class="sourceCode" id="cb142"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># transformation log10</span></span>
<span><span class="va">df_lcomb</span><span class="op">$</span><span class="va">taille_log10</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html">log10</a></span><span class="op">(</span><span class="va">df_lcomb</span><span class="op">$</span><span class="va">taille</span><span class="op">)</span></span>
<span><span class="va">df_lcomb</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  id taille poids taille_log10
1  1    120    44     2.079181
2  2    150    56     2.176091
3  3    132    49     2.120574
4  4    122    45     2.086360
5  5    119    39     2.075547
6  6    110    35     2.041393</code></pre>
</div>
</div>
<p>Cette situation survient également lorsque nous voulons changer le type d’une variable existante dans un jeu de données. Par exemple, la variable <code>id</code> dans la base de données <code>df_lcomb</code> est une donnée de type numérique (utilisez la fonction <code><a href="https://rdrr.io/r/utils/str.html">str()</a></code> ou <code><a href="https://rdrr.io/r/base/class.html">class()</a></code> pour le vérifier). Si nous voulions convertir <code>id</code> en un facteur à utiliser plus tard dans notre analyse, nous pouvons créer une nouvelle variable appelée <code>id_f</code> dans notre jeu de données et utiliser la fonction <code><a href="https://rdrr.io/r/base/factor.html">factor()</a></code> pour convertir la variable <code>id</code>.</p>
<div class="cell">
<div class="sourceCode" id="cb144"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># conversion en un facteur</span></span>
<span><span class="va">df_lcomb</span><span class="op">$</span><span class="va">id_f</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">df_lcomb</span><span class="op">$</span><span class="va">id</span><span class="op">)</span></span>
<span><span class="va">df_lcomb</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  id taille poids taille_log10 id_f
1  1    120    44     2.079181    1
2  2    150    56     2.176091    2
3  3    132    49     2.120574    3
4  4    122    45     2.086360    4
5  5    119    39     2.075547    5
6  6    110    35     2.041393    6</code></pre>
</div>
<div class="sourceCode" id="cb146"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">df_lcomb</span><span class="op">)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   6 obs. of  5 variables:
 $ id          : int  1 2 3 4 5 6
 $ taille      : num  120 150 132 122 119 110
 $ poids       : num  44 56 49 45 39 35
 $ taille_log10: num  2.08 2.18 2.12 2.09 2.08 ...
 $ id_f        : Factor w/ 6 levels "1","2","3","4",..: 1 2 3 4 5 6</code></pre>
</div>
</div>
</section><section id="fusionner-des-jeux-de-données" class="level3" data-number="3.4.5"><h3 data-number="3.4.5" class="anchored" data-anchor-id="fusionner-des-jeux-de-données">
<span class="header-section-number">3.4.5</span> Fusionner des jeux de données</h3>
<p>Au lieu d’ajouter simplement des lignes ou des colonnes à un jeu de données, nous pouvons également fusionner deux jeux de données. Supposons que nous ayons un jeu de données contenant des informations taxonomiques sur certains invertébrés communs des côtes rocheuses du Royaume-Uni (appelé <code>taxa</code>) et un autre jeu de données qui contient des informations sur l’endroit où ils se trouvent habituellement sur le littoral rocheux (appelé <code>zone</code>). Nous pouvons fusionner ces jeux cadres de données pour produire un seul jeu de données contenant à la fois des informations taxonomiques et des informations sur l’emplacement. Commençons par créer ces deux jeux de données (en réalité, il vous suffira probablement d’importer vos différents ensembles de données).</p>
<div class="cell">
<div class="sourceCode" id="cb148"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">taxa</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span></span>
<span>  GENUS <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Patella"</span>, <span class="st">"Littorina"</span>, <span class="st">"Halichondria"</span>, <span class="st">"Semibalanus"</span><span class="op">)</span>,</span>
<span>  espece <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"vulgata"</span>, <span class="st">"littoria"</span>, <span class="st">"panacea"</span>, <span class="st">"balanoides"</span><span class="op">)</span>,</span>
<span>  famille <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"patellidae"</span>, <span class="st">"Littorinidae"</span>, <span class="st">"Halichondriidae"</span>, <span class="st">"Archaeobalanidae"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">taxa</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         GENUS     espece          famille
1      Patella    vulgata       patellidae
2    Littorina   littoria     Littorinidae
3 Halichondria    panacea  Halichondriidae
4  Semibalanus balanoides Archaeobalanidae</code></pre>
</div>
<div class="sourceCode" id="cb150"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">zone</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span></span>
<span>  genus <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"Laminaria"</span>, <span class="st">"Halichondria"</span>, <span class="st">"Xanthoria"</span>, <span class="st">"Littorina"</span>,</span>
<span>    <span class="st">"Semibalanus"</span>, <span class="st">"Fucus"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  espece <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"digitata"</span>, <span class="st">"panacea"</span>, <span class="st">"parietina"</span>, <span class="st">"littoria"</span>,</span>
<span>    <span class="st">"balanoides"</span>, <span class="st">"serratus"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  zone <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"v_bas"</span>, <span class="st">"bas"</span>, <span class="st">"v_haut"</span>, <span class="st">"bas_moy"</span>, <span class="st">"haut"</span>, <span class="st">"bas_moy"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">zone</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         genus     espece    zone
1    Laminaria   digitata   v_bas
2 Halichondria    panacea     bas
3    Xanthoria  parietina  v_haut
4    Littorina   littoria bas_moy
5  Semibalanus balanoides    haut
6        Fucus   serratus bas_moy</code></pre>
</div>
</div>
<p>Puisque nos deux jeux de données contiennent au moins une variable en commun (<code>espece</code> dans notre cas), nous pouvons simplement utiliser la fonction <code><a href="https://rdrr.io/r/base/merge.html">merge()</a></code> (‘fusionner’) pour créer un nouveau jeu de données appelé <code>taxa_zone</code>.</p>
<div class="cell">
<div class="sourceCode" id="cb152"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">taxa_zone</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html">merge</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">taxa</span>, y <span class="op">=</span> <span class="va">zone</span><span class="op">)</span></span>
<span><span class="va">taxa_zone</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     species        GENUS           family        genus    zone
1 balanoides  Semibalanus Archaeobalanidae  Semibalanus    high
2   littoria    Littorina     Littorinidae    Littorina low_mid
3    panacea Halichondria  Halichondriidae Halichondria     low</code></pre>
</div>
</div>
<p>Remarquez que le jeu de données fusionné ne contient que les lignes ayant des <code>espèces</code> <strong>dans les 2</strong> jeux de données. Il existe également deux colonnes appelées <code>GENUS</code> et <code>genus</code> car la fonction <code><a href="https://rdrr.io/r/base/merge.html">merge()</a></code> les traite comme deux variables différentes provenant des deux jeux de données.</p>
<p>Si nous voulons inclure toutes les données des deux jeux de données, nous devrons utiliser l’argument <code>all = TRUE</code> dans la fonction <code><a href="https://rdrr.io/r/base/merge.html">merge()</a></code>. Les valeurs manquantes seront incluses en tant que <code>NA</code> :</p>
<div class="cell">
<div class="sourceCode" id="cb154"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">taxa_zone</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html">merge</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">taxa</span>, y <span class="op">=</span> <span class="va">zone</span>, all <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">taxa_zone</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     species        GENUS           family        genus    zone
1 balanoides  Semibalanus Archaeobalanidae  Semibalanus    high
2   digitata         &lt;NA&gt;             &lt;NA&gt;    Laminaria   v_low
3   littoria    Littorina     Littorinidae    Littorina low_mid
4    panacea Halichondria  Halichondriidae Halichondria     low
5  parietina         &lt;NA&gt;             &lt;NA&gt;    Xanthoria  v_high
6   serratus         &lt;NA&gt;             &lt;NA&gt;        Fucus low_mid
7    vulgata      Patella       patellidae         &lt;NA&gt;    &lt;NA&gt;</code></pre>
</div>
</div>
<p>Si les noms des variables sur lesquelles vous souhaitez baser la fusion sont différents dans chaque jeux de données (par exemple <code>GENUS</code> et <code>genus</code>), vous pouvez spécifier les noms dans le premier jeu de données (appelé <code>x</code>) et dans le second jeu de données (appelé <code>y</code>) à l’aide des arguments <code>by.x =</code> et <code>by.y =</code>.</p>
<div class="cell">
<div class="sourceCode" id="cb156"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">taxa_zone</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html">merge</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">taxa</span>, y <span class="op">=</span> <span class="va">zone</span>, by.x <span class="op">=</span> <span class="st">"GENUS"</span>, by.y <span class="op">=</span> <span class="st">"genus"</span>, all <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">taxa_zone</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         GENUS  species.x           family  species.y    zone
1        Fucus       &lt;NA&gt;             &lt;NA&gt;   serratus low_mid
2 Halichondria    panacea  Halichondriidae    panacea     low
3    Laminaria       &lt;NA&gt;             &lt;NA&gt;   digitata   v_low
4    Littorina   littoria     Littorinidae   littoria low_mid
5      Patella    vulgata       patellidae       &lt;NA&gt;    &lt;NA&gt;
6  Semibalanus balanoides Archaeobalanidae balanoides    high
7    Xanthoria       &lt;NA&gt;             &lt;NA&gt;  parietina  v_high</code></pre>
</div>
</div>
<p>Ou utiliser plusieurs noms de variables :</p>
<div class="cell">
<div class="sourceCode" id="cb158"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">taxa_zone</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html">merge</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="va">taxa</span>, y <span class="op">=</span> <span class="va">zone</span>, by.x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"espece"</span>, <span class="st">"GENUS"</span><span class="op">)</span>,</span>
<span>  by.y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"espece"</span>, <span class="st">"genus"</span><span class="op">)</span>, all <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="va">taxa_zone</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      espece        GENUS          famille    zone
1 balanoides  Semibalanus Archaeobalanidae    haut
2   digitata    Laminaria             &lt;NA&gt;   v_bas
3   littoria    Littorina     Littorinidae bas_moy
4    panacea Halichondria  Halichondriidae     bas
5  parietina    Xanthoria             &lt;NA&gt;  v_haut
6   serratus        Fucus             &lt;NA&gt; bas_moy
7    vulgata      Patella       patellidae    &lt;NA&gt;</code></pre>
</div>
</div>
</section><section id="sec-reshape" class="level3" data-number="3.4.6"><h3 data-number="3.4.6" class="anchored" data-anchor-id="sec-reshape">
<span class="header-section-number">3.4.6</span> Remodeler des jeux de données</h3>
<p>Le remodelage des données dans différents formats est une tâche courante. Avec des données de type rectangulaire (les jeux de données ont le même nombre de lignes dans chaque colonne), vous rencontrerez deux formes principales de jeu de données : le format “long” (parfois appelé “empilé”) et le format “large”. Un exemple de jeu de données au format “long” est donné ci-dessous. Nous pouvons voir que chaque ligne représente une observation unique d’un sujet individuel et que chaque sujet peut avoir plusieurs lignes. Il en résulte une seule colonne de notre <code>mesures</code>.</p>
<div class="cell">
<div class="sourceCode" id="cb160"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">donnees_longue</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span></span>
<span>  sujet <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>, <span class="st">"D"</span><span class="op">)</span>, each <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>,</span>
<span>  sexe <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>, <span class="st">"M"</span><span class="op">)</span>, each <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>,</span>
<span>  condition <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"controle"</span>, <span class="st">"cond1"</span>, <span class="st">"cond2"</span><span class="op">)</span>, times <span class="op">=</span> <span class="fl">4</span><span class="op">)</span>,</span>
<span>  mesures <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span>    <span class="fl">12.9</span>, <span class="fl">14.2</span>, <span class="fl">8.7</span>, <span class="fl">5.2</span>, <span class="fl">12.6</span>, <span class="fl">10.1</span>, <span class="fl">8.9</span>,</span>
<span>    <span class="fl">12.1</span>, <span class="fl">14.2</span>, <span class="fl">10.5</span>, <span class="fl">12.9</span>, <span class="fl">11.9</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">donnees_longue</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   sujet sexe condition mesures
1      A    M  controle    12.9
2      A    M     cond1    14.2
3      A    M     cond2     8.7
4      B    F  controle     5.2
5      B    F     cond1    12.6
6      B    F     cond2    10.1
7      C    F  controle     8.9
8      C    F     cond1    12.1
9      C    F     cond2    14.2
10     D    M  controle    10.5
11     D    M     cond1    12.9
12     D    M     cond2    11.9</code></pre>
</div>
</div>
<p>Nous pouvons également formater les mêmes données au format “large”, comme indiqué ci-dessous. Dans ce format, nous avons plusieurs observations de chaque sujet dans une seule ligne avec des mesures dans différentes colonnes (<code>controle</code>, <code>cond1</code> et <code>cond2</code>). Il s’agit d’un format courant lorsqu’il s’agit de mesures répétées à partir d’unités d’échantillonnage.</p>
<div class="cell">
<div class="sourceCode" id="cb162"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">donnees_large</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span></span>
<span>  sujet <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>, <span class="st">"D"</span><span class="op">)</span>,</span>
<span>  sexe <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>, <span class="st">"M"</span><span class="op">)</span>,</span>
<span>  controle <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">12.9</span>, <span class="fl">5.2</span>, <span class="fl">8.9</span>, <span class="fl">10.5</span><span class="op">)</span>,</span>
<span>  cond1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">14.2</span>, <span class="fl">12.6</span>, <span class="fl">12.1</span>, <span class="fl">12.9</span><span class="op">)</span>,</span>
<span>  cond2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">8.7</span>, <span class="fl">10.1</span>, <span class="fl">14.2</span>, <span class="fl">11.9</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">donnees_large</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  sujet sexe controle cond1 cond2
1     A    M     12.9  14.2   8.7
2     B    F      5.2  12.6  10.1
3     C    F      8.9  12.1  14.2
4     D    M     10.5  12.9  11.9</code></pre>
</div>
</div>
<p>Bien qu’il n’y ait pas de problème inhérent à l’un ou l’autre de ces formats, il est parfois nécessaire d’effectuer une conversion entre les deux, car certaines fonctions requièrent un format spécifique pour fonctionner. Le format le plus courant est le format “long”.</p>
<p>Il existe de nombreuses façons de convertir ces deux formats, mais nous utiliserons les fonctions <code><a href="https://rdatatable.gitlab.io/data.table/reference/melt.data.table.html">melt()</a></code> et <code><a href="https://rdatatable.gitlab.io/data.table/reference/dcast.data.table.html">dcast()</a></code> du paquet <code>reshape2</code> <span class="emoji" data-emoji="package">📦</span> (vous devez d’abord l’installer). Les fonctions <code><a href="https://rdatatable.gitlab.io/data.table/reference/melt.data.table.html">melt()</a></code> est utilisée pour convertir les formats larges en formats longs. Le premier argument de la fonction <code><a href="https://rdatatable.gitlab.io/data.table/reference/melt.data.table.html">melt()</a></code> est la base de données que nous voulons faire fondre (dans notre cas <code>wide_data</code>). La fonction <code>id.vars = c("subject", "sex")</code> est un vecteur des variables que vous souhaitez empiler, l’argument <code>measured.vars = c("control", "cond1", "cond2")</code> identifie les colonnes des mesures dans les différentes conditions, l’argument <code>variable.name = "condition"</code> spécifie ce que vous voulez appeler la colonne empilée de vos différentes conditions dans votre cadre de données de sortie et l’argument <code>value.name = "measurement"</code> est le nom de la colonne de vos mesures empilées dans votre cadre de données de sortie.</p>
<div class="cell">
<div class="sourceCode" id="cb164"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/hadley/reshape">reshape2</a></span><span class="op">)</span></span>
<span><span class="va">donnees_large</span> <span class="co"># rappelons-nous à quoi ressemble le format "large"</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  sujet sexe controle cond1 cond2
1     A    M     12.9  14.2   8.7
2     B    F      5.2  12.6  10.1
3     C    F      8.9  12.1  14.2
4     D    M     10.5  12.9  11.9</code></pre>
</div>
<div class="sourceCode" id="cb166"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># conversion du "large" en "long"</span></span>
<span><span class="va">mon_df_long</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/reshape2/man/melt.html">melt</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">donnees_large</span>, id.vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"sujet"</span>, <span class="st">"sexe"</span><span class="op">)</span>,</span>
<span>  vars.mesures <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"controle"</span>, <span class="st">"cond1"</span>, <span class="st">"cond2"</span><span class="op">)</span>,</span>
<span>  nom.variable <span class="op">=</span> <span class="st">"condition"</span>, value.name <span class="op">=</span> <span class="st">"mesures"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">mon_df_long</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   sujet sexe variable mesures
1      A    M controle    12.9
2      B    F controle     5.2
3      C    F controle     8.9
4      D    M controle    10.5
5      A    M    cond1    14.2
6      B    F    cond1    12.6
7      C    F    cond1    12.1
8      D    M    cond1    12.9
9      A    M    cond2     8.7
10     B    F    cond2    10.1
11     C    F    cond2    14.2
12     D    M    cond2    11.9</code></pre>
</div>
</div>
<p>La fonction <code><a href="https://rdatatable.gitlab.io/data.table/reference/dcast.data.table.html">dcast()</a></code> est utilisée pour convertir un jeu de données au format “long” en un jeu de données au format “large”. Le premier argument est à nouveau le jeu de données que nous voulons convertir (<code>donnees_longue</code> pour cet exemple). Le deuxième argument est la syntaxe de la formule. L’argument <code>sujet + sexe</code> de la formule signifie que nous voulons garder ces colonnes séparées, et l’élément <code>~ condition</code> est la colonne qui contient les étiquettes que nous voulons diviser en nouvelles colonnes dans notre nouveau jeu de données. La colonne <code>var.valeur = "mesures"</code> est la colonne qui contient les données mesurées.</p>
<div class="cell">
<div class="sourceCode" id="cb168"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">donnees_longue</span> <span class="co"># rappelons-nous à quoi ressemble le format "long"</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   sujet sexe condition mesures
1      A    M  controle    12.9
2      A    M     cond1    14.2
3      A    M     cond2     8.7
4      B    F  controle     5.2
5      B    F     cond1    12.6
6      B    F     cond2    10.1
7      C    F  controle     8.9
8      C    F     cond1    12.1
9      C    F     cond2    14.2
10     D    M  controle    10.5
11     D    M     cond1    12.9
12     D    M     cond2    11.9</code></pre>
</div>
<div class="sourceCode" id="cb170"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># conversion du "long" en "large"</span></span>
<span><span class="va">mon_df_large</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/reshape2/man/cast.html">dcast</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">donnees_longue</span>, <span class="va">sujet</span> <span class="op">+</span> <span class="va">sexe</span> <span class="op">~</span> <span class="va">condition</span>,</span>
<span>  var.valeur <span class="op">=</span> <span class="st">"mesures"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">mon_df_large</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  sujet sexe cond1 cond2 controle
1     A    M  14.2   8.7     12.9
2     B    F  12.6  10.1      5.2
3     C    F  12.1  14.2      8.9
4     D    M  12.9  11.9     10.5</code></pre>
</div>
</div>
</section></section><section id="introduction-au-tidyverse-lunivers-ordonné" class="level2" data-number="3.5"><h2 data-number="3.5" class="anchored" data-anchor-id="introduction-au-tidyverse-lunivers-ordonné">
<span class="header-section-number">3.5</span> Introduction au <code>tidyverse</code> (<em>L’univers ordonné</em>)</h2>
<p>il semble que ce ne soit pas très ordonné ici et que nous devons améliorer ça.</p>
</section><section id="résumer-des-jeux-de-données" class="level2" data-number="3.6"><h2 data-number="3.6" class="anchored" data-anchor-id="résumer-des-jeux-de-données">
<span class="header-section-number">3.6</span> Résumer des jeux de données</h2>
<p>Maintenant que nous sommes en mesure de manipuler et extraire des données de nos jeux de données, notre prochaine tâche est de commencer à explorer et connaître nos données. Dans cette section, nous commencerons à produire des tableaux de statistiques récapitulatives utiles sur les variables de notre jeu de données et, dans les deux chapitres suivants, nous aborderons la visualisation de nos données à l’aide de graphiques R de base et l’utilisation du paquet <code>ggplot2</code> <span class="emoji" data-emoji="package">📦</span>.</p>
<p>Un point de départ très utile consiste à produire des statistiques récapitulatives simples pour toutes les variables de notre jeu de données <code>licornes</code> à l’aide de la fonction <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code> :</p>
<div class="cell">
<div class="sourceCode" id="cb172"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">licornes</span><span class="op">)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    p_care              food        block         height           weight      
 Length:96          low   :32   Min.   :1.0   Min.   : 1.200   Min.   : 5.790  
 Class :character   medium:32   1st Qu.:1.0   1st Qu.: 4.475   1st Qu.: 9.027  
 Mode  :character   high  :32   Median :1.5   Median : 6.450   Median :11.395  
                                Mean   :1.5   Mean   : 6.840   Mean   :12.155  
                                3rd Qu.:2.0   3rd Qu.: 9.025   3rd Qu.:14.537  
                                Max.   :2.0   Max.   :17.200   Max.   :23.890  
   mane_size       fluffyness       horn_rings    
 Min.   : 5.80   Min.   :  5.80   Min.   : 1.000  
 1st Qu.:11.07   1st Qu.: 39.05   1st Qu.: 4.000  
 Median :13.45   Median : 70.05   Median : 6.000  
 Mean   :14.05   Mean   : 79.78   Mean   : 7.062  
 3rd Qu.:16.45   3rd Qu.:113.28   3rd Qu.: 9.000  
 Max.   :49.20   Max.   :189.60   Max.   :17.000  </code></pre>
</div>
</div>
<p>Pour les variables numériques (c’est-à-dire <code>height</code>, <code>weight</code> etc.), la moyenne, le minimum, le maximum, la médiane, le premier quartile (inférieur) et le troisième quartile (supérieur) sont présentés. Pour les variables factorielles (i.e. <code>care</code> et <code>food</code>), le nombre d’observations dans chacun des niveaux est indiqué. Si une variable contient des données manquantes, le nombre de <code>NA</code> est également indiqué.</p>
<p>Si nous voulons résumer un sous-ensemble plus petit de variables dans notre jeu de données, nous pouvons utiliser nos compétences en matière d’indexation en combinaison avec la fonction <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code>. Par exemple, pour résumer uniquement les variables <code>height</code>, <code>weight</code>, <code>mane_size</code> et <code>fluffyness</code> nous pouvons inclure les index de colonne appropriés avec les crochets <code>[ ]</code>. Remarquez que nous incluons toutes les lignes en ne spécifiant pas d’index de ligne :</p>
<div class="cell">
<div class="sourceCode" id="cb174"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">licornes</span><span class="op">[</span>, <span class="fl">4</span><span class="op">:</span><span class="fl">7</span><span class="op">]</span><span class="op">)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     height           weight         mane_size       fluffyness    
 Min.   : 1.200   Min.   : 5.790   Min.   : 5.80   Min.   :  5.80  
 1st Qu.: 4.475   1st Qu.: 9.027   1st Qu.:11.07   1st Qu.: 39.05  
 Median : 6.450   Median :11.395   Median :13.45   Median : 70.05  
 Mean   : 6.840   Mean   :12.155   Mean   :14.05   Mean   : 79.78  
 3rd Qu.: 9.025   3rd Qu.:14.537   3rd Qu.:16.45   3rd Qu.:113.28  
 Max.   :17.200   Max.   :23.890   Max.   :49.20   Max.   :189.60  </code></pre>
</div>
<div class="sourceCode" id="cb176"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># ou de manière équivalente</span></span>
<span><span class="co"># summary(licornes[, c("height", "weight", "mane_size", "fluffyness")])</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Et pour résumer une seule variable :</p>
<div class="cell">
<div class="sourceCode" id="cb177"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">licornes</span><span class="op">$</span><span class="va">mane_size</span><span class="op">)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
   5.80   11.07   13.45   14.05   16.45   49.20 </code></pre>
</div>
<div class="sourceCode" id="cb179"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># ou de manière équivalente</span></span>
<span><span class="co"># summary(licornes[, 6])</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Comme vous l’avez vu plus haut, le <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code> indique le nombre d’observations dans chaque niveau de nos variables factorielles. Une autre fonction utile pour générer des tableaux de comptage est la fonction <code><a href="https://rdrr.io/r/base/table.html">table()</a></code>. La fonction <code><a href="https://rdrr.io/r/base/table.html">table()</a></code> peut être utilisée pour construire des tables de contingence de différentes combinaisons de niveaux de facteurs. Par exemple, pour compter le nombre d’observations pour chaque niveau de <code>food</code> :</p>
<div class="cell">
<div class="sourceCode" id="cb180"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">licornes</span><span class="op">$</span><span class="va">food</span><span class="op">)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
   low medium   high 
    32     32     32 </code></pre>
</div>
</div>
<p>Nous pouvons aller plus loin en produisant un tableau des effectifs pour chaque combinaison des niveau de <code>food</code> et <code>care</code> :</p>
<div class="cell">
<div class="sourceCode" id="cb182"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">licornes</span><span class="op">$</span><span class="va">food</span>, <span class="va">licornes</span><span class="op">$</span><span class="va">p_care</span><span class="op">)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        
         care no_care
  low      16      16
  medium   16      16
  high     16      16</code></pre>
</div>
</div>
<p>Une version plus souple de la fonction <code><a href="https://rdrr.io/r/base/table.html">table()</a></code> est la fonction <code><a href="https://rdrr.io/r/stats/xtabs.html">xtabs()</a></code>. La fonction <code><a href="https://rdrr.io/r/stats/xtabs.html">xtabs()</a></code> utilise une notation de formule (<code>~</code>) pour construire des tables de contingence avec les variables de classification croisée séparées par un <code>+</code> à droite de la formule. <code><a href="https://rdrr.io/r/stats/xtabs.html">xtabs()</a></code> contient également un argument utile, <code>data =</code>, pour ne pas avoir à inclure le nom du jeu de données lors de la spécification de chaque variable :</p>
<div class="cell">
<div class="sourceCode" id="cb184"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/xtabs.html">xtabs</a></span><span class="op">(</span><span class="op">~</span> <span class="va">food</span> <span class="op">+</span> <span class="va">p_care</span>, data <span class="op">=</span> <span class="va">licornes</span><span class="op">)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        p_care
food     care no_care
  low      16      16
  medium   16      16
  high     16      16</code></pre>
</div>
</div>
<p>Nous pouvons même construire des tables de contingence plus compliquées en utilisant davantage de variables. Notez que dans l’exemple ci-dessous, la variable <code><a href="https://rdrr.io/r/stats/xtabs.html">xtabs()</a></code> a discrètement contraint notre <code>block</code> à être un facteur.</p>
<div class="cell">
<div class="sourceCode" id="cb186"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/xtabs.html">xtabs</a></span><span class="op">(</span><span class="op">~</span> <span class="va">food</span> <span class="op">+</span> <span class="va">p_care</span> <span class="op">+</span> <span class="va">block</span>, data <span class="op">=</span> <span class="va">licornes</span><span class="op">)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>, , block = 1

        p_care
food     care no_care
  low       8       8
  medium    8       8
  high      8       8

, , block = 2

        p_care
food     care no_care
  low       8       8
  medium    8       8
  high      8       8</code></pre>
</div>
</div>
<p>Et pour un tableau mieux formaté, nous pouvons imbriquer la fonction <code><a href="https://rdrr.io/r/stats/xtabs.html">xtabs()</a></code> à l’intérieur de la fonction <code><a href="https://rdrr.io/r/stats/ftable.html">ftable()</a></code> pour “aplatir” le tableau.</p>
<div class="cell">
<div class="sourceCode" id="cb188"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/ftable.html">ftable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/xtabs.html">xtabs</a></span><span class="op">(</span><span class="op">~</span> <span class="va">food</span> <span class="op">+</span> <span class="va">p_care</span> <span class="op">+</span> <span class="va">block</span>, data <span class="op">=</span> <span class="va">licornes</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>               block 1 2
food   p_care           
low    care          8 8
       no_care       8 8
medium care          8 8
       no_care       8 8
high   care          8 8
       no_care       8 8</code></pre>
</div>
</div>
<p>Nous pouvons également résumer nos données pour chaque niveau d’une variable factorielle. Supposons que nous voulions calculer la valeur moyenne de <code>height</code> pour chacun de nos niveaux <code>low</code>, <code>meadium</code> et <code>high</code> de la variable <code>food</code>. Pour ce faire, nous utilisons la fonction <code><a href="https://rdrr.io/r/base/mean.html">mean()</a></code> que nous appliquons à la variable <code>height</code> pour chaque niveau de <code>food</code> en utilisant la fonction <code><a href="https://rdrr.io/r/base/tapply.html">tapply()</a></code>.</p>
<div class="cell">
<div class="sourceCode" id="cb190"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/tapply.html">tapply</a></span><span class="op">(</span><span class="va">licornes</span><span class="op">$</span><span class="va">height</span>, <span class="va">licornes</span><span class="op">$</span><span class="va">food</span>, <span class="va">mean</span><span class="op">)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     low   medium     high 
5.853125 7.012500 7.653125 </code></pre>
</div>
</div>
<p>La fonction <code><a href="https://rdrr.io/r/base/tapply.html">tapply()</a></code> n’est pas limitée au calcul des valeurs moyennes, vous pouvez l’utiliser pour appliquer de nombreuses fonctions fournies avec R ou même des fonctions que vous avez écrites vous-même (voir le <a href="05-programmation.html" class="quarto-xref"><span>Chapitre 5</span></a> pour plus de détails). Par exemple, nous pouvons appliquer la fonction <code><a href="https://rdrr.io/r/stats/sd.html">sd()</a></code> pour calculer l’écart-type pour chaque niveau de <code>food</code> ou même la fonction <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code>.</p>
<div class="cell">
<div class="sourceCode" id="cb192"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/tapply.html">tapply</a></span><span class="op">(</span><span class="va">licornes</span><span class="op">$</span><span class="va">height</span>, <span class="va">licornes</span><span class="op">$</span><span class="va">food</span>, <span class="va">sd</span><span class="op">)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     low   medium     high 
2.828425 3.005345 3.483323 </code></pre>
</div>
<div class="sourceCode" id="cb194"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/tapply.html">tapply</a></span><span class="op">(</span><span class="va">licornes</span><span class="op">$</span><span class="va">height</span>, <span class="va">licornes</span><span class="op">$</span><span class="va">food</span>, <span class="va">summary</span><span class="op">)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$low
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  1.800   3.600   5.550   5.853   8.000  12.300 

$medium
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  1.800   4.500   7.000   7.013   9.950  12.300 

$high
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  1.200   5.800   7.450   7.653   9.475  17.200 </code></pre>
</div>
</div>
<p>Remarque : si la variable que vous souhaitez résumer contient des valeurs manquantes (<code>NA</code>), vous devrez également inclure un argument spécifiant comment vous souhaitez que la fonction traite les valeurs manquantes (<code>NA</code>). Nous en avons vu un exemple dans la <a href="02-base.html#sec-na-vals" class="quarto-xref"><span>Section 2.5.5</span></a> où la fonction <code><a href="https://rdrr.io/r/base/mean.html">mean()</a></code> a renvoyé une valeur <code>NA</code> en cas de données manquantes. Pour inclure les <code>NA</code>, il suffit d’ajouter l’argument <code>na.rm = TRUE</code> lors de l’utilisation de <code><a href="https://rdrr.io/r/base/tapply.html">tapply()</a></code>.</p>
<div class="cell">
<div class="sourceCode" id="cb196"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/tapply.html">tapply</a></span><span class="op">(</span><span class="va">licornes</span><span class="op">$</span><span class="va">height</span>, <span class="va">licornes</span><span class="op">$</span><span class="va">food</span>, <span class="va">mean</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     low   medium     high 
5.853125 7.012500 7.653125 </code></pre>
</div>
</div>
<p>Nous pouvons également utiliser <code><a href="https://rdrr.io/r/base/tapply.html">tapply()</a></code> pour appliquer des fonctions à plus d’un seul facteur. La seule chose à retenir est que les facteurs doivent être fournis à la fonction <code><a href="https://rdrr.io/r/base/tapply.html">tapply()</a></code> sous la forme d’une liste à l’aide de la fonction <code><a href="https://rdrr.io/r/base/list.html">list()</a></code>. Pour calculer la moyenne de <code>height</code> pour chaque combinaison de <code>food</code> et <code>care</code> nous pouvons utiliser la notation <code>list(licornes$food, licornes$p_care)</code>.</p>
<div class="cell">
<div class="sourceCode" id="cb198"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/tapply.html">tapply</a></span><span class="op">(</span><span class="va">licornes</span><span class="op">$</span><span class="va">height</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">licornes</span><span class="op">$</span><span class="va">food</span>, <span class="va">licornes</span><span class="op">$</span><span class="va">p_care</span><span class="op">)</span>, <span class="va">mean</span><span class="op">)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         care no_care
low    8.0375 3.66875
medium 9.1875 4.83750
high   9.6000 5.70625</code></pre>
</div>
</div>
<p>Et si vous en avez un peu marre d’avoir à écrire <code>licornes$</code> pour chaque variable, vous pouvez imbriquer la notation <code><a href="https://rdrr.io/r/base/tapply.html">tapply()</a></code> à l’intérieur de la fonction <code><a href="https://rdrr.io/r/base/with.html">with()</a></code>. La fonction <code><a href="https://rdrr.io/r/base/with.html">with()</a></code> permet à R d’évaluer une expression par rapport à un objet de données nommé (dans ce cas, le jeu de données <code>licornes</code>).</p>
<div class="cell">
<div class="sourceCode" id="cb200"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/with.html">with</a></span><span class="op">(</span><span class="va">licornes</span>, <span class="fu"><a href="https://rdrr.io/r/base/tapply.html">tapply</a></span><span class="op">(</span><span class="va">height</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">food</span>, <span class="va">p_care</span><span class="op">)</span>, <span class="va">mean</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         care no_care
low    8.0375 3.66875
medium 9.1875 4.83750
high   9.6000 5.70625</code></pre>
</div>
</div>
<p>La fonction <code><a href="https://rdrr.io/r/base/with.html">with()</a></code> fonctionne également avec de nombreuses autres fonctions et peut vous faire économiser beaucoup de temps de frappe !</p>
<p>Une autre fonction très utile pour résumer des données est la fonction <code><a href="https://rdrr.io/r/stats/aggregate.html">aggregate()</a></code>. La fonction <code><a href="https://rdrr.io/r/stats/aggregate.html">aggregate()</a></code> fonctionne de manière très similaire à la fonction <code><a href="https://rdrr.io/r/base/tapply.html">tapply()</a></code> mais est un peu plus flexible.</p>
<p>Par exemple, pour calculer la moyenne des variables <code>height</code>, <code>weight</code>, <code>mane_size</code> et <code>fluffyness</code> pour chaque niveau de <code>food</code> :</p>
<div class="cell">
<div class="sourceCode" id="cb202"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/aggregate.html">aggregate</a></span><span class="op">(</span><span class="va">licornes</span><span class="op">[</span>, <span class="fl">4</span><span class="op">:</span><span class="fl">7</span><span class="op">]</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>food <span class="op">=</span> <span class="va">licornes</span><span class="op">$</span><span class="va">food</span><span class="op">)</span>, FUN <span class="op">=</span> <span class="va">mean</span><span class="op">)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    food   height    weight mane_size fluffyness
1    low 5.853125  8.652812  11.14375    45.1000
2 medium 7.012500 11.164062  13.83125    67.5625
3   high 7.653125 16.646875  17.18125   126.6875</code></pre>
</div>
</div>
<p>Dans le code ci-dessus, nous avons indexé les colonnes que nous voulons résumer dans le jeu de données <code>licornes</code> à l’aide de la notation <code>licornes[, 4:7]</code>. Les <code>by =</code> (“par =”) spécifie une liste de facteurs (<code>list(food = licornes$food)</code>) et l’argument <code>FUN =</code> désigne la fonction à appliquer (<code>mean</code> dans cet exemple).</p>
<p>Comme dans le cas de la fonction <code><a href="https://rdrr.io/r/base/tapply.html">tapply()</a></code> nous pouvons inclure plus d’un facteur sur lequel appliquer une fonction. Ici, nous calculons les valeurs moyennes pour chaque combinaison de <code>food</code> et <code>care</code> :</p>
<div class="cell">
<div class="sourceCode" id="cb204"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/aggregate.html">aggregate</a></span><span class="op">(</span><span class="va">licornes</span><span class="op">[</span>, <span class="fl">4</span><span class="op">:</span><span class="fl">7</span><span class="op">]</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span></span>
<span>  food <span class="op">=</span> <span class="va">licornes</span><span class="op">$</span><span class="va">food</span>,</span>
<span>  p_care <span class="op">=</span> <span class="va">licornes</span><span class="op">$</span><span class="va">p_care</span></span>
<span><span class="op">)</span>, FUN <span class="op">=</span> <span class="va">mean</span><span class="op">)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    food  p_care  height    weight mane_size fluffyness
1    low    care 8.03750  9.016250   9.96250   30.30625
2 medium    care 9.18750 11.011250  13.48750   40.59375
3   high    care 9.60000 16.689375  15.54375   98.05625
4    low no_care 3.66875  8.289375  12.32500   59.89375
5 medium no_care 4.83750 11.316875  14.17500   94.53125
6   high no_care 5.70625 16.604375  18.81875  155.31875</code></pre>
</div>
</div>
<p>Nous pouvons également utiliser la fonction <code><a href="https://rdrr.io/r/stats/aggregate.html">aggregate()</a></code> d’une manière différente en utilisant la méthode de la formule (comme nous l’avons fait avec la fonction <code><a href="https://rdrr.io/r/stats/xtabs.html">xtabs()</a></code>). Dans la partie gauche de la formule (<code>~</code>), nous spécifions la variable à laquelle nous voulons appliquer la fonction <code><a href="https://rdrr.io/r/base/mean.html">mean()</a></code> et, dans la partie droite, nos facteurs séparés par un symbole <code>+</code>. La méthode de la formule permet également d’utiliser l’argument <code>data =</code> pour des raisons de commodité.</p>
<div class="cell">
<div class="sourceCode" id="cb206"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/aggregate.html">aggregate</a></span><span class="op">(</span><span class="va">height</span> <span class="op">~</span> <span class="va">food</span> <span class="op">+</span> <span class="va">p_care</span>, FUN <span class="op">=</span> <span class="va">mean</span>, data <span class="op">=</span> <span class="va">licornes</span><span class="op">)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    food  p_care  height
1    low    care 8.03750
2 medium    care 9.18750
3   high    care 9.60000
4    low no_care 3.66875
5 medium no_care 4.83750
6   high no_care 5.70625</code></pre>
</div>
</div>
<p>L’un des avantages de la méthode de la formule est qu’elle permet également d’utiliser l’argument <code>subset =</code> pour appliquer la fonction à des sous-ensembles des données originales. Par exemple, pour calculer la moyenne de <code>height</code> pour chaque combinaison de <code>food</code> et <code>care</code> mais seulement pour les licornes qui ont moins de 7 anneaux sur leur corne (<code>horn_rings</code>).</p>
<div class="cell">
<div class="sourceCode" id="cb208"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/aggregate.html">aggregate</a></span><span class="op">(</span><span class="va">height</span> <span class="op">~</span> <span class="va">food</span> <span class="op">+</span> <span class="va">p_care</span>, FUN <span class="op">=</span> <span class="va">mean</span>, subset <span class="op">=</span> <span class="va">horn_rings</span> <span class="op">&lt;</span> <span class="fl">7</span>, data <span class="op">=</span> <span class="va">licornes</span><span class="op">)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    food  p_care   height
1    low    care 8.176923
2 medium    care 8.570000
3   high    care 7.900000
4    low no_care 3.533333
5 medium no_care 5.316667
6   high no_care 3.850000</code></pre>
</div>
</div>
<p>Ou seulement pour les licornes du <code>block</code> 1.</p>
<div class="cell">
<div class="sourceCode" id="cb210"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/aggregate.html">aggregate</a></span><span class="op">(</span><span class="va">height</span> <span class="op">~</span> <span class="va">food</span> <span class="op">+</span> <span class="va">p_care</span>, FUN <span class="op">=</span> <span class="va">mean</span>, subset <span class="op">=</span> <span class="va">block</span> <span class="op">==</span> <span class="st">"1"</span>, data <span class="op">=</span> <span class="va">licornes</span><span class="op">)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    food  p_care  height
1    low    care  8.7500
2 medium    care  9.5375
3   high    care 10.0375
4    low no_care  3.3250
5 medium no_care  5.2375
6   high no_care  5.9250</code></pre>
</div>
</div>
</section><section id="exporter-des-données" class="level2" data-number="3.7"><h2 data-number="3.7" class="anchored" data-anchor-id="exporter-des-données">
<span class="header-section-number">3.7</span> Exporter des données</h2>
<p>Nous espérons que vous avez maintenant une idée de la puissance et de l’utilité de R pour manipuler et résumer des données (et nous n’avons fait qu’effleurer la surface). L’un des grands avantages de l’utilisation de R pour manipuler vos données est que vous disposez d’un enregistrement permanent de tout ce que vous avez fait avec vos données. Fini le temps des modifications non documentées dans Excel ou Calc ! En traitant vos données en “lecture seule” et en documentant toutes vos décisions dans R, vous aurez fait un grand pas en avant pour rendre votre analyse plus reproductible et plus transparente pour les autres. Il est toutefois important de savoir que les modifications apportées à votre base de données dans R ne changeront pas le fichier de données original que vous avez importé dans R (et c’est une bonne chose). Heureusement, il est facile d’exporter des cadres de données vers des fichiers externes dans une grande variété de formats.</p>
<section id="fonctions-dexportation" class="level3" data-number="3.7.1"><h3 data-number="3.7.1" class="anchored" data-anchor-id="fonctions-dexportation">
<span class="header-section-number">3.7.1</span> Fonctions d’exportation</h3>
<p>La principale fonction d’exportation de jeux de données est <strong><code><a href="https://rdrr.io/r/utils/write.table.html">write.table()</a></code></strong>. Comme pour la fonction <code><a href="https://rdrr.io/r/utils/read.table.html">read.table()</a></code> la fonction <code><a href="https://rdrr.io/r/utils/write.table.html">write.table()</a></code> est très flexible et dispose de nombreux arguments permettant de personnaliser son comportement. Prenons l’exemple de notre jeu de données d’origine <code>licornes</code> et exportons ces modifications vers un fichier externe.</p>
<p>De la même manière que pour <code><a href="https://rdrr.io/r/utils/read.table.html">read.table()</a></code>, <code><a href="https://rdrr.io/r/utils/write.table.html">write.table()</a></code> possède une série de fonctions avec des valeurs par défaut spécifiques au format, telles que <code><a href="https://rdrr.io/r/utils/write.table.html">write.csv()</a></code> et <code>write.delim()</code> qui utilisent respectivement “,” et les tabulations comme délimiteurs, et incluent les noms de colonnes par défaut.</p>
<p>Ordonnons les lignes du jeu de données par ordre croissant de la variable <code>height</code> à l’intérieur de chaque niveau de <code>food</code>. Nous appliquerons également une transformation racine carrée à la variable du nombre d’anneaux de la corne (<code>horn_rings</code>) et une transformation logarithmique, log<del>10</del> sur la variable <code>height</code> et enregistrons ça en tant que colonnes supplémentaires dans notre jeu de données (nous espérons que cela vous est familier maintenant !).</p>
<div class="cell">
<div class="sourceCode" id="cb212"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">licornes_df2</span> <span class="op">&lt;-</span> <span class="va">licornes</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html">order</a></span><span class="op">(</span><span class="va">licornes</span><span class="op">$</span><span class="va">food</span>, <span class="va">licornes</span><span class="op">$</span><span class="va">height</span><span class="op">)</span>, <span class="op">]</span></span>
<span><span class="va">licornes_df2</span><span class="op">$</span><span class="va">horn_rings_sqrt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="va">licornes_df2</span><span class="op">$</span><span class="va">horn_rings</span><span class="op">)</span></span>
<span><span class="va">licornes_df2</span><span class="op">$</span><span class="va">log10_height</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html">log10</a></span><span class="op">(</span><span class="va">licornes_df2</span><span class="op">$</span><span class="va">height</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">licornes_df2</span><span class="op">)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   96 obs. of  10 variables:
 $ p_care         : chr  "no_care" "no_care" "no_care" "no_care" ...
 $ food           : Factor w/ 3 levels "low","medium",..: 1 1 1 1 1 1 1 1 1 1 ...
 $ block          : int  1 1 1 2 1 2 2 2 1 2 ...
 $ height         : num  1.8 2.2 2.3 2.4 3 3.1 3.2 3.3 3.7 3.7 ...
 $ weight         : num  6.01 9.97 7.28 9.1 9.93 8.74 7.45 8.92 7.03 8.1 ...
 $ mane_size      : num  17.6 9.6 13.8 14.5 12 16.1 14.1 11.6 7.9 10.5 ...
 $ fluffyness     : num  46.2 63.1 32.8 78.7 56.6 39.1 38.1 55.2 36.7 60.5 ...
 $ horn_rings     : int  4 2 6 8 6 3 4 6 5 6 ...
 $ horn_rings_sqrt: num  2 1.41 2.45 2.83 2.45 ...
 $ log10_height   : num  0.255 0.342 0.362 0.38 0.477 ...</code></pre>
</div>
</div>
<p>Nous pouvons maintenant exporter notre nouveau jeu de données <code>licornes_df2</code> à l’aide de la fonction <code><a href="https://rdrr.io/r/utils/write.table.html">write.table()</a></code>. Le premier argument est le jeu de données que vous voulez exporter (<code>licornes_df2</code> dans notre exemple). Nous donnons ensuite le nom du fichier que nous voulons créer (avec son extension) et le chemin d’accès au fichier entre guillemets simples ou doubles en utilisant l’argument <code>file =</code>. Dans cet exemple, nous exportons le jeu de données vers un fichier appelé <code>licornes_transformee.csv</code> dans le répertoire <code>donnees</code>. L’argument <code>row.names = FALSE</code> empêche R d’inclure les noms des lignes dans la première colonne du fichier.</p>
<div class="cell">
<div class="sourceCode" id="cb214"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html">write.csv</a></span><span class="op">(</span><span class="va">licornes_transformee</span>,</span>
<span>  file <span class="op">=</span> <span class="st">"donnees/licornes_transformee.csv"</span>, </span>
<span>  row.names <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Comme nous avons enregistré le fichier en tant que fichier texte délimité par des virgules (CSV), nous pouvons ouvrir ce fichier dans n’importe quel éditeur de texte.</p>
<p>Nous pouvons bien sûr exporter nos fichiers dans une variété d’autres formats.</p>
</section><section id="autres-fonctions-dexportation" class="level3" data-number="3.7.2"><h3 data-number="3.7.2" class="anchored" data-anchor-id="autres-fonctions-dexportation">
<span class="header-section-number">3.7.2</span> Autres fonctions d’exportation</h3>
<p>Comme pour l’importation de fichiers de données dans R, il existe également de nombreuses fonctions alternatives pour exporter des données vers des fichiers externes, en plus de la fonction <code><a href="https://rdrr.io/r/utils/write.table.html">write.table()</a></code>. Si vous avez suivi la rubrique “Autres fonctions d’importation” <a href="#sec-import-other" class="quarto-xref"><span>Section 3.3.4</span></a> de ce chapitre, vous aurez déjà installé les paquets nécessaires.</p>
<p>La fonction <code><a href="https://rdatatable.gitlab.io/data.table/reference/fwrite.html">fwrite()</a></code> du paquet <code>data.table</code> <span class="emoji" data-emoji="package">📦</span> est très efficace pour exporter des objets de données volumineux et est beaucoup plus rapide que la fonction <code><a href="https://rdrr.io/r/utils/write.table.html">write.table()</a></code>. Il est également assez simple à utiliser car il possède la plupart des arguments de la fonction <code><a href="https://rdrr.io/r/utils/write.table.html">write.table()</a></code>. Pour exporter un fichier texte délimité par des tabulations, il suffit de spécifier le nom du jeu de données, le nom et le chemin du fichier de sortie et le séparateur entre les colonnes :</p>
<div class="cell">
<div class="sourceCode" id="cb215"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com">data.table</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/fwrite.html">fwrite</a></span><span class="op">(</span><span class="va">licornes_df2</span>, file <span class="op">=</span> <span class="st">"donnees/licornes_04_12.txt"</span>, sep <span class="op">=</span> <span class="st">"\t"</span><span class="op">)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Pour exporter un fichier csv délimité, c’est encore plus facile car nous n’avons même pas besoin d’inclure l’option <code>sep =</code> :</p>
<div class="cell">
<div class="sourceCode" id="cb216"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com">data.table</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/fwrite.html">fwrite</a></span><span class="op">(</span><span class="va">licornes_df2</span>, file <span class="op">=</span> <span class="st">"donnees/licornes_04_12.csv"</span><span class="op">)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Le paquet <code>readr</code> <span class="emoji" data-emoji="package">📦</span> est également fourni avec deux fonctions utiles pour exporter rapidement des données dans des fichiers externes : la fonction <code><a href="https://readr.tidyverse.org/reference/write_delim.html">write_tsv()</a></code> pour écrire des fichiers délimités par des tabulations et la fonction <code><a href="https://readr.tidyverse.org/reference/write_delim.html">write_csv()</a></code> pour enregistrer des fichiers de valeurs séparées par des virgules (csv).</p>
<div class="cell">
<div class="sourceCode" id="cb217"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://readr.tidyverse.org">readr</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://readr.tidyverse.org/reference/write_delim.html">write_tsv</a></span><span class="op">(</span><span class="va">licornes_df2</span>, path <span class="op">=</span> <span class="st">"donnees/licornes_04_12.txt"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://readr.tidyverse.org/reference/write_delim.html">write_csv</a></span><span class="op">(</span><span class="va">licornes_df2</span>, path <span class="op">=</span> <span class="st">"donnees/licornes_04_12.csv"</span><span class="op">)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<!--course website Links-->
<!--cran Links-->
<!--RStudio-->
<!--style guides-->
<!--Package Links-->
<!--Editors-->
<!--Bioconductor Links-->
<!--GitHub Links-->
<!--R markdown Links-->
<!--ggplot Links-->
<!--Basics links-->
<!--Data links-->
<!--Resource Links-->
<!--Misc Links-->
<!--Add by Augustin-->


</section></section><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><hr>
<ol>
<li id="fn1"><p>Pour des raisons de place et de simplicité, nous ne montrons que les cinq premières et cinq dernières lignes.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol></section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copié");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copié");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/biostats-uottawa\.github\.io\/enfR\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./02-base.html" class="pagination-link" aria-label="Quelques notions de base sur R">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Quelques notions de base sur R</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./04-graphique.html" class="pagination-link" aria-label="Figures">
        <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Figures</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
<p><a href="https://biostats-uottawa.github.io/people.html">Julien Martin</a></p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/biostats-uottawa/enfR/edit/main/03-donnees.qmd" class="toc-action"><i class="bi bi-github"></i>Modifier cette page</a></li><li><a href="https://github.com/biostats-uottawa/enfR/issues/new" class="toc-action"><i class="bi empty"></i>Faire part d'un problème</a></li></ul></div></div>
    <div class="nav-footer-right">
<p>Ce livre a été crée avec <a href="https://quarto.org/">Quarto</a>.</p>
</div>
  </div>
</footer>


</body></html>
